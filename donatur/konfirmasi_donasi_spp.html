<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Responsive Admin Template</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" />

    <link href="../assets/css/style.css" rel="stylesheet" />
  </head>
  <body class="d-flex flex-column min-vh-100">
    <!-- Header fixed -->
    <header class="fixed-top shadow-sm">
      <!-- Branding Panel (Desktop) -->
      <div class="branding d-none d-lg-flex panel-header">
        <img src="https://sianas.aat.or.id/assets/images/logo_AAT.png" alt="Logo" />
        <span>Sistem Informasi Anak Asuh</span>
      </div>

      <!-- Navbar Desktop -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light px-3 shadow-sm">
        <div class="container-fluid">
          <!-- LEFT MENU -->
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Beranda</a>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="donasiDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Donasi
              </a>
              <ul class="dropdown-menu" aria-labelledby="donasiDropdown">
                <li><h6 class="dropdown-header">Donasi Rutin</h6></li>
                <li><a class="dropdown-item" href="donasi_spp.html">SPP</a></li>
                <li><a class="dropdown-item" href="donasi_pt.html">Bantuan Pendidikan Tinggi</a></li>
                <li><a class="dropdown-item" href="donasi_opr.html">Operasional</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="donasi_langsung.html">Donasi Langsung</a></li>
                <li><a class="dropdown-item" href="pembayaran_donasi.html">Pembayaran Donasi</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="anakAsuhDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Anak Asuh
              </a>
              <ul class="dropdown-menu" aria-labelledby="anakAsuhDropdown">
                <li><a class="dropdown-item" href="anak_asuh.html">List Anak Asuh</a></li>
                <li><a class="dropdown-item" href="sekolah.html">List Sekolah</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="bpt.html">List BPT</a></li>
                <li><a class="dropdown-item" href="pt.html">List Pendidikan Tinggi</a></li>
              </ul>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="rekening-yayasan.html">Rekening Yayasan</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="transfer-tak-dikenal.html">Transfer Tak Dikenal</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="kontak.html">Hubungi Kami</a>
            </li>
          </ul>

          <!-- RIGHT PROFILE & NOTIFICATION MENU -->
          <ul class="navbar-nav ms-auto align-items-center">
            <!-- ðŸ”” Notifikasi -->
            <li class="nav-item dropdown me-2">
              <a
                class="nav-link position-relative"
                href="#"
                id="notifDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="bi bi-bell" style="font-size: 1.3rem"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"> 3 </span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notifDropdown">
                <li><h6 class="dropdown-header">Notifikasi</h6></li>
                <li><a class="dropdown-item small" href="#">Pembayaran donasi berhasil</a></li>
                <li><a class="dropdown-item small" href="#">SPP anak asuh sudah jatuh tempo</a></li>
                <li><a class="dropdown-item small" href="#">Laporan bulanan tersedia</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item text-center small text-primary" href="#">Lihat semua</a></li>
              </ul>
            </li>

            <!-- ðŸ‘¤ Profil -->
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle d-flex align-items-center"
                href="#"
                id="profileDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <img
                  src="https://sianas.aat.or.id/assets/images/logo_AAT.png"
                  alt="User"
                  width="36"
                  height="36"
                  class="rounded-circle profile-img shadow-sm me-2"
                />
                <span class="fw-semibold">D-XX-XXXX</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                <li><a class="dropdown-item" href="profil.html">Profil</a></li>
                <li><a class="dropdown-item" href="#">Ubah Password</a></li>
                <li><a class="dropdown-item" href="riwayat_donasi.html">Riwayat Donasi</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item text-danger" href="#">Logout</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
    </header>

    <!-- Navbar Mobile (atas) -->
    <nav class="fixed-top navbar navbar-dark bg-dark d-lg-none bg-aat">
      <div class="container-fluid">
        <button class="btn btn-outline-light" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
          <i class="bi bi-list"></i>
        </button>
        <span class="navbar-brand mx-auto">Konfirmasi Donasi SPP</span>
        <button class="btn btn-outline-light">
          <i class="bi bi-search"></i>
        </button>
      </div>
    </nav>

    <!-- Offcanvas Sidebar (Mobile) -->
    <div class="offcanvas offcanvas-start bg-dark text-white bg-aat" tabindex="-1" id="mobileSidebar">
      <!-- Header Sidebar -->
      <div class="offcanvas-header border-bottom">
        <div class="d-flex align-items-center">
          <img
            src="https://sianas.aat.or.id/assets/images/logo_AAT.png"
            class="rounded-circle me-2 profile-img"
            alt="Logo"
            width="40"
            height="40"
          />
          <span class="fw-bold">Sistem Informasi Anak Asuh</span>
        </div>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
      </div>

      <!-- Profil User -->
      <div class="p-4 border-bottom text-center bg-aat-grey bg-gradient text-black">
        <img
          src="https://sianas.aat.or.id/assets/images/logo_AAT.png"
          class="rounded-circle profile-img"
          alt="User"
          width="80"
          height="80"
        />
        <h6 class="mb-0">Admin User</h6>
        <small class="mb-0">Administrator</small>
      </div>

      <!-- Body Sidebar -->
      <div class="offcanvas-body d-flex flex-column p-0">
        <!-- Menu scrollable -->
        <div class="list-group list-group-flush flex-grow-1 overflow-auto">
          <a href="index.html" class="list-group-item list-group-item-action bg-aat text-white">
            <i class="bi bi-house me-2"></i> Beranda
          </a>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#donasi"
          >
            <i class="bi bi-cash me-2"></i> Donasi <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="donasi">
            <a href="donasi_spp.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">SPP</a>
            <a href="donasi_pt.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Bantuan Pendidikan Tinggi</a
            >
            <a href="donasi_opr.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">Operasional</a>
            <a href="pembayaran_langsung.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">Donasi Langsung</a>
            <a href="pembayaran_donasi.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">Pembayaran Donasi</a>
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#komunitas"
          >
            <i class="bi bi-person-lines-fill me-2"></i> Anak Asuh <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="komunitas">
            <a href="anak_asuh.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">List Anak Asuh</a>
            <a href="sekolah.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">List Sekolah</a>
            <a href="bpt.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">List Anak BPT</a>
            <a href="#" class="list-group-item list-group-item-action bg-aat-grey ps-5">List Pendidikan Tinggi</a>
          </div>
          <a href="rekening-yayasan.html" class="list-group-item list-group-item-action bg-aat text-white">
            <i class="bi bi-wallet2 me-2"></i> Rekening Yayasan
          </a>
          <a href="transfer-tak-dikenal.html" class="list-group-item list-group-item-action bg-aat text-white">
            <i class="bi bi-receipt me-2"></i> Transfer Tak Dikenal
          </a>
          <a href="kontak.html" class="list-group-item list-group-item-action bg-aat text-white">
            <i class="bi bi-telephone me-2"></i> Hubungi Kami
          </a>
        </div>

        <!-- Footer Mobile -->
        <div class="p-3 border-top small text-center text-white d-lg-none">
          Â© Yayasan AAT Indonesia <br />
          Developed by <span class="fw-bold">Omah IT</span> <br />
          Maintained by <span class="fw-bold">Mandhira IT</span>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation (Mobile) -->
    <div class="mobile-bottom-nav">
      <a href="index.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-house-fill fs-4"></i><br />
        <small>Beranda</small>
      </a>
      <a href="anak_asuh.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-person-lines-fill fs-4"></i><br />
        <small>Anak Asuh</small>
      </a>
      <a href="pembayaran_donasi.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-receipt fs-4"></i><br />
        <small>Pembayaran</small>
      </a>
      <a href="profil.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-person-fill fs-4"></i><br />
        <small>Profil</small>
      </a>
    </div>
    <main class="container mt-5 pt-4 pb-5">
      <div class="d-none d-lg-block mb-6"></div>
      <h3 class="text-center page-title">Konfirmasi Donasi SPP Anak Asuh</h3>
      <div id="paymentList"></div>
      <!-- Bagian Total Donasi -->
      <div class="payment-card p-3 mb-3 shadow-sm rounded">
        <div class="row align-items-center">
          <div class="col-12 col-md-9 payment-info">
            <div class="d-flex mb-2">
              <div class="flex-grow-1"><strong>Total Donasi sampai akhir Tahun Akademik</strong></div>
              <span class="fs-5 fw-bold">Rp 1.800.000</span>
            </div>
          </div>
        </div>
      </div>
      <div class="terms-box">
        <h3>KETENTUAN</h3>
        <ul>
          <li>
            Donasi SPP bersifat rutin dan berlangsung selama 12 bulan (jika assign di bulan Juli â€“ Oktober) atau 6 bulan
            (jika assign di bulan Januari)
          </li>
          <li>
            Donasi SPP secara otomatis akan berlanjut ke Tahun Akademik berikutnya sampai anak asuh tersebut lulus.
          </li>
          <li>
            Donasi SPP bisa berhenti saat anak asuh mengundurkan diri atau Donatur tidak berkenan melanjutkan asalkan
            menuntaskan kewajiban sampai akhir Tahun Akademik dan menghubungi Admin kami.
          </li>
        </ul>
      </div>

      <div class="checkbox-group">
        <input type="checkbox" id="ageCheck" />
        <label for="ageCheck"
          >Saya menyatakan berusia 18 tahun keatas atau dalam pengawasan orang tua untuk melakukan donasi ini</label
        >
      </div>

      <div class="checkbox-group">
        <input type="checkbox" id="commitCheck" />
        <label for="commitCheck"
          >Saya bersedia dan berkomitmen untuk memberikan donasi sejumlah dana yang tertera pada form ini selama waktu
          yang disepakati pada setiap jenis donasi.</label
        >
      </div>

      <button class="confirm-btn" id="confirmBtn" disabled onclick="window.location.href='pembayaran.html'">KONFIRMASI</button>
      <a class="back-link" href="#">Kembali</a>
    </main>

    <!-- Modal Konfirmasi -->
    <div class="modal fade" id="modalKonfirmasi" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title" id="modalLabel"><i class="bi bi-check-circle me-2"></i>Membatalkan Donasi</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <p>Apakah Anda yakin ingin membatalkan donasi untuk <strong id="namaAnakasuh"></strong>?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
            <button type="button" class="btn btn-success" id="btnKonfirmasi">Ya, Konfirmasi</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Script -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // âœ… Data hanya diakses satu kali
      const dataPembayaran = [
        {
          foto: 'https://randomuser.me/api/portraits/men/10.jpg',
          nama: 'Budi Santoso',
          sekolah: 'SMA Pius Bakti Utama',
          kelas: 'Kelas 12',
          spp: 'Rp100.000',
          jumlah: '12',
          subtotal: 'Rp 1.200.000',
        },
        {
          foto: 'https://randomuser.me/api/portraits/women/10.jpg',
          nama: 'Sinta Wulandari',
          sekolah: 'SD Pius Bakti Utama',
          kelas: 'Kelas 5',
          spp: 'Rp 50.000',
          jumlah: '12',
          subtotal: 'Rp 600.000',
        },
      ];

      const container = document.getElementById('paymentList');

      container.innerHTML = dataPembayaran
        .map(
          (d, i) => `
      <div class="payment-card p-3 mb-3 shadow-sm rounded">
        <div class="row align-items-center">
          
          <!-- Foto & Identitas Anak Asuh -->
          <div class="col-12 col-md-3 text-center mb-3 mb-md-0">
            <img 
              src="${d.foto}" 
              alt="${d.nama}" 
              class="rounded-circle shadow-sm mb-2" 
              width="70" 
              height="70"
            />
            <div class="small text-muted lh-sm">
              <strong>${d.nama}</strong><br />
              <span>${d.sekolah} (${d.kelas})</span>
            </div>
          </div>

          <!-- Info Pembayaran -->
          <div class="col-12 col-md-6 payment-info">
            <div class="d-flex mb-2">
              <div class="flex-grow-1"><strong>SPP Bulanan</strong></div>
              <div>${d.spp}</div>
            </div>
            <div class="d-flex mb-2">
              <div class="flex-grow-1"><strong>Jumlah Bulan</strong></div>
              <div>${d.jumlah} bulan</div>
            </div>
            <div class="d-flex mb-2">
              <div class="flex-grow-1"><strong>Subtotal Donasi</strong></div>
              <div>${d.subtotal}</div>
            </div>
          </div>


          <!-- Tombol Aksi -->
          <div class="col-12 col-md-3 text-md-end payment-actions">
            <button 
              class="btn btn-sm ${d.selesai ? 'btn-outline-secondary' : 'btn-danger'}" 
              ${d.selesai ? 'disabled' : ''}
              data-nama="${d.nama}" 
              data-bs-toggle="modal" 
              data-bs-target="#modalKonfirmasi"
            >
              ${d.selesai ? '<i class="bi bi-check-circle"></i> Selesai' : '<i class="bi bi-check-lg"></i> Hapus'}
            </button>
          </div>

        </div>
      </div>
    `
        )
        .join('');

      // Modal interaksi
      const modal = new bootstrap.Modal(document.getElementById('modalKonfirmasi'));
      const namaAnakasuh = document.getElementById('namaAnakasuh');
      const btnKonfirmasi = document.getElementById('btnKonfirmasi');

      container.addEventListener('click', e => {
        if (e.target.closest('button[data-nama]')) {
          const btn = e.target.closest('button');
          namaAnakasuh.textContent = btn.getAttribute('data-nama');
        }
      });

      btnKonfirmasi.addEventListener('click', () => {
        alert('Donasi berhasil dibatalkan âœ…');
        modal.hide();
      });

      const ageCheck = document.getElementById('ageCheck');
      const commitCheck = document.getElementById('commitCheck');
      const confirmBtn = document.getElementById('confirmBtn');

      function toggleButton() {
        confirmBtn.disabled = !(ageCheck.checked && commitCheck.checked);
      }

      ageCheck.addEventListener('change', toggleButton);
      commitCheck.addEventListener('change', toggleButton);

      confirmBtn.addEventListener('click', () => {
        alert('Donasi berhasil dikonfirmasi!');
      });
    </script>
  </body>
</html>
