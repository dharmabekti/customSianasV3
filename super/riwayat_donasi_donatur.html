<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Responsive Admin Template</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

    <link href="../assets/css/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" />
    <!-- Sweet Alerts css -->
    <link href="../assets/plugins/sweetalert2/sweetalert2.min.css" rel="stylesheet" type="text/css" />
  </head>
  <body class="d-flex flex-column min-vh-100">
    <!-- Header fixed -->
    <header class="fixed-top shadow-sm">
      <!-- Branding Panel (Desktop) -->
      <div class="branding d-none d-lg-flex panel-header align-items-center">
        <img src="https://sianas.aat.or.id/assets/images/logo_AAT.png" alt="Logo" />
        <div class="ms-2 me-auto">
          <span class="fw-bold">Sistem Informasi Anak Asuh</span>
        </div>
        <!-- Tahun Ajaran + Datetime -->
        <div class="text-center me-3">
          <h4 class="mb-0">TA. 2025/2026</h4>
          <div class="datetime" id="currentDateTime"></div>
        </div>
      </div>

      <!-- Navbar Desktop -->
      <nav class="navbar navbar-expand-lg px-3 custom-navbar">
        <div class="container-fluid">
          <!-- LEFT MENU -->
          <ul class="navbar-nav me-auto nav-left">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Beranda</a>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="donaturDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Donatur
              </a>
              <ul class="dropdown-menu" aria-labelledby="donaturDropdown">
                <li><a class="dropdown-item" href="donatur.html">List Donatur</a></li>
                <li><a class="dropdown-item" href="form_donatur.html">Input Donatur</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="riwayat_donasi_donatur.html">Riwayat Donasi Donatur</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="lelang.html">Pemilihan Anak Asuh oleh Donatur</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="sekretariatDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Sekretariat
              </a>
              <ul class="dropdown-menu" aria-labelledby="sekretariatDropdown">
                <li><a class="dropdown-item" href="sekretariat.html">Data Sekretariat</a></li>
                <li><a class="dropdown-item" href="penanggungjawab_sekretariat.html">Data PJ Sekretariat</a></li>
                <li><a class="dropdown-item" href="form_pjs.html">Input PJ Sekretariat</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="data_pt.html">Data Pendidikan Tinggi</a></li>
                <li><a class="dropdown-item" href="form_pt.html">Input Pendidikan Tinggi</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="bpt.html">Data BPT Sekretariat</a></li>
                <li><a class="dropdown-item" href="form_bpt.html">Input BPT Sekretariat</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="komunitasDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Komunitas/Sekolah
              </a>
              <ul class="dropdown-menu" aria-labelledby="komunitasDropdown">
                <li><a class="dropdown-item" href="sekolah.html">Data Komunitas/Sekolah</a></li>
                <li><a class="dropdown-item" href="form_sekolah.html">Input Komunitas/Sekolah</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="penanggungjawab.html">Data PJ Sekolah</a></li>
                <li><a class="dropdown-item" href="form_penanggungjawab.html">Input PJ Sekolah</a></li>
                <li><a class="dropdown-item" href="konfirmasi_penanggungjawab.html">Konfirmasi PJ Sekolah Baru</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#skBeasiswaModal"
                    >SK Beasiswa</a
                  >
                </li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="anakAsuhDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Anak Asuh
              </a>
              <ul class="dropdown-menu" aria-labelledby="anakAsuhDropdown">
                <li><a class="dropdown-item" href="anak_asuh.html">List Anak Asuh</a></li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Input Anak Asuh</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="form_anak_asuh.html">Input Manual</a></li>
                    <li><a class="dropdown-item" href="import_anak_asuh.html">Import dari Excel</a></li>
                  </ul>
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="pengajuan_anakasuh_baru.html">Konfirmasi Anak Asuh Baru</a></li>
                <li><a class="dropdown-item" href="konfirmasi_naik_jenjang.html">Konfirmasi Kenaikan Jenjang</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="raport_skl_ijasah.html">Raport, SKl & Ijazah</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="transferBeasiswaDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Transfer Beasiswa
              </a>
              <ul class="dropdown-menu" aria-labelledby="transferBeasiswaDropdown">
                <li><a class="dropdown-item" href="transfer_beasiswa.html">Data Transfer Beasiswa</a></li>
                <li><a class="dropdown-item" href="status_transfer.html">Status Transfer Beasiswa</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="ganti_rekening.html">Penggantian No Rekening</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="pengembalian_dana.html">Pengembalian Dana Berlebih</a></li>
                <li>
                  <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#rekeningYayasanModal"
                    >Rekening Yayasan</a
                  >
                </li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="pembayaranDonasiDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Pembayaran & Donasi
              </a>
              <ul class="dropdown-menu" aria-labelledby="pembayaranDonasiDropdown">
                <li><a class="dropdown-item" href="konfirmasi_status_pembayaran.html">Konfirmasi & Status Pembayaran</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="donasi_langsung.html">Donasi Langsung</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="transfer_tak_dikenal.html">Transfer Tak Dikenal</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="laporanDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Laporan
              </a>
              <ul class="dropdown-menu" aria-labelledby="laporanDropdown">
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Laporan Donatur</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="laporan_donatur.html">Cari per ID</a></li>
                    <li><a class="dropdown-item" href="statistik_donatur.html">Statistik Umum</a></li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Laporan Sekretariat</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="laporan_sekretariat.html">Cari per Nama</a></li>
                    <li><a class="dropdown-item" href="statistik_sekretariat.html">Statistik Umum</a></li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Laporan Komunitas</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="laporan_komunitas.html">Cari per ID</a></li>
                    <li><a class="dropdown-item" href="statistik_komunitas.html">Statistik Umum</a></li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Laporan Anak Asuh</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="laporan_anakasuh.html">Cari per ID</a></li>
                    <li><a class="dropdown-item" href="statistik_anakasuh.html">Statistik Umum</a></li>
                  </ul>
                </li>
                <li>
                  <a class="dropdown-item" href="laporan_raport_skl_ijasah.html">Laporan Raport, SKL, & Ijasah</a>
                </li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Rekup Transfer Beasiswa</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="rekup_status_transfer_beasiswa.html">Status Transfer</a></li>
                    <li><a class="dropdown-item" href="rekup_nominal_transfer_beasiswa.html">Nominal</a></li>
                  </ul>
                </li>
                <li><a class="dropdown-item" href="rekup_kode_unik.html">Rekup Kode Unik</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="settingDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Pengaturan
              </a>
              <ul class="dropdown-menu" aria-labelledby="settingDropdown">
                <li><a class="dropdown-item" href="admin.html">Manajemen Admin</a></li>
                <li><a class="dropdown-item" href="tahun_ajaran.html">Tahun Ajaran</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="kontakDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Hubungi Kami
              </a>
              <ul class="dropdown-menu" aria-labelledby="kontakDropdown">
                <li>
                  <a class="dropdown-item" href="https://wa.me/628xxxxxxxxx" target="_blank"
                    ><i class="bi bi-whatsapp me-2"></i>WhatsApp</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="mailto:beasiswa@aat.or.id"><i class="bi bi-envelope me-2"></i>Email</a>
                </li>
                <li>
                  <a class="dropdown-item" href="https://instagram.com/aat.indonesia" target="_blank"
                    ><i class="bi bi-instagram me-2"></i>Instagram</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="https://youtube.com/@aatindonesia" target="_blank"
                    ><i class="bi bi-youtube me-2"></i>YouTube</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="https://facebook.com/aatindonesia" target="_blank"
                    ><i class="bi bi-facebook me-2"></i>Facebook</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="https://x.com/aat_indonesia" target="_blank"
                    ><i class="bi bi-twitter-x me-2"></i>X (Twitter)</a
                  >
                </li>
              </ul>
            </li>
          </ul>

          <!-- RIGHT PROFILE & NOTIFICATION MENU -->
          <ul class="navbar-nav ms-auto align-items-center nav-right">
            <!-- ðŸ”” Notifikasi -->
            <li class="nav-item dropdown me-2">
              <a
                class="nav-link position-relative"
                href="#"
                id="notifDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="bi bi-bell" style="font-size: 14px"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"> 3 </span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notifDropdown">
                <li><h6 class="dropdown-header">Notifikasi</h6></li>
                <li><a class="dropdown-item small" href="#">Pembayaran donasi berhasil</a></li>
                <li><a class="dropdown-item small" href="#">SPP anak asuh sudah jatuh tempo</a></li>
                <li><a class="dropdown-item small" href="#">Laporan bulanan tersedia</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item text-center small text-primary" href="#">Lihat semua</a></li>
              </ul>
            </li>

            <!-- ðŸ‘¤ Profil -->
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle d-flex align-items-center"
                href="#"
                id="profileDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <img
                  src="https://sianas.aat.or.id/assets/images/logo_AAT.png"
                  alt="User"
                  width="30"
                  height="30"
                  class="rounded-circle profile-img shadow-sm me-2"
                />
                <span class="fw-semibold ft-12">ADM-NAS-XXXX</span>
              </a>

              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                <li>
                  <a class="dropdown-item" href="profil.html">Profil</a>
                </li>

                <li>
                  <a class="dropdown-item" href="ubah_password.html">Ubah Password</a>
                </li>

                <!-- SUBMENU SEKRETARIAT -->
                <li class="dropdown-submenu">
                  <a class="dropdown-item d-flex justify-content-between align-items-center" href="#">
                    Sekretariat : <strong>All</strong>
                    <i class="bi bi-caret-down-fill ms-2"></i>
                  </a>

                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item active" href="#">All</a></li>
                    <li><a class="dropdown-item" href="#">Yogyakarta</a></li>
                    <li><a class="dropdown-item" href="#">Semarang</a></li>
                    <li><a class="dropdown-item" href="#">Purwokerto</a></li>
                    <li><a class="dropdown-item" href="#">Madiun</a></li>
                    <li><a class="dropdown-item" href="#">Malang</a></li>
                    <li><a class="dropdown-item" href="#">Bandung</a></li>
                  </ul>
                </li>

                <li><hr class="dropdown-divider" /></li>

                <li>
                  <a class="dropdown-item text-danger" href="#">Logout</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
    </header>

    <!-- Navbar Mobile (atas) -->
    <nav class="fixed-top navbar navbar-dark bg-dark d-lg-none bg-aat">
      <div class="container-fluid">
        <button class="btn btn-outline-light" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
          <i class="bi bi-list"></i>
        </button>
        <span class="navbar-brand mx-auto">Riwayat Donasi Donatur</span>
        <div class="d-flex">
          <div class="dropdown me-1">
            <button
              class="btn btn-outline-light position-relative"
              type="button"
              id="mobileNotifDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-bell"></i>
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">3</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="mobileNotifDropdown">
              <li><h6 class="dropdown-header">Notifikasi</h6></li>
              <li><a class="dropdown-item small" href="#">Pembayaran donasi berhasil</a></li>
              <li><a class="dropdown-item small" href="#">SPP anak asuh sudah jatuh tempo</a></li>
              <li><a class="dropdown-item small" href="#">Laporan bulanan tersedia</a></li>
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item text-center small text-primary" href="#">Lihat semua</a></li>
            </ul>
          </div>
          <div class="dropdown">
            <button
              class="btn btn-outline-light"
              type="button"
              id="mobileProfileDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="mobileProfileDropdown">
              <li><a class="dropdown-item" href="profil.html">Profil</a></li>
              <li><a class="dropdown-item" href="ubah_password.html">Ubah Password</a></li>
              <li><hr class="dropdown-divider" /></li>
              <!-- SUBMENU SEKRETARIAT -->
              <li class="dropdown-submenu">
                <a class="dropdown-item d-flex justify-content-between align-items-center" href="#">
                  Sekretariat : <strong>All</strong>
                  <i class="bi bi-caret-down-fill ms-2"></i>
                </a>

                <ul class="dropdown-menu">
                  <li><a class="dropdown-item active" href="#">All</a></li>
                  <li><a class="dropdown-item" href="#">Yogyakarta</a></li>
                  <li><a class="dropdown-item" href="#">Semarang</a></li>
                  <li><a class="dropdown-item" href="#">Purwokerto</a></li>
                  <li><a class="dropdown-item" href="#">Madiun</a></li>
                  <li><a class="dropdown-item" href="#">Malang</a></li>
                  <li><a class="dropdown-item" href="#">Bandung</a></li>
                </ul>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item text-danger" href="#">Logout</a></li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <!-- Offcanvas Sidebar (Mobile) -->
    <div class="offcanvas offcanvas-start bg-dark text-white bg-aat" tabindex="-1" id="mobileSidebar">
      <!-- Header Sidebar -->
      <div class="offcanvas-header border-bottom">
        <div class="d-flex align-items-center">
          <img
            src="https://sianas.aat.or.id/assets/images/logo_AAT.png"
            class="rounded-circle me-2 profile-img"
            alt="Logo"
            width="40"
            height="40"
          />
          <span class="fw-bold">Sistem Informasi Anak Asuh</span>
        </div>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
      </div>

      <!-- Profil User -->
      <div class="p-4 border-bottom text-center bg-aat-grey bg-gradient text-black">
        <img
          src="https://sianas.aat.or.id/assets/images/logo_AAT.png"
          class="rounded-circle profile-img"
          alt="User"
          width="80"
          height="80"
        />
        <h6 class="mt-1">Ki Anom</h6>
        <small class="mb-0">ADM-XXXX</small><br />
        <small class="mb-0">Super Admin</small>
      </div>

      <!-- Body Sidebar -->
      <div class="offcanvas-body d-flex flex-column p-0">
        <!-- Menu scrollable -->
        <div class="list-group list-group-flush flex-grow-1 overflow-auto">
          <a href="index.html" class="list-group-item list-group-item-action bg-aat text-white">
            <i class="bi bi-house me-2"></i> Beranda
          </a>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#donatur"
          >
            <i class="bi bi-person me-2"></i> Donatur <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="donatur">
            <a href="donatur.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">List Donatur</a>
            <a href="riwayat_donasi_donatur.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Riwayat Donasi Donatur</a>
            <a href="lelang.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Pemilihan Anak Asuh oleh Donatur</a
            >
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#sekretariat"
          >
            <i class="bi bi-building me-2"></i> Sekretariat <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="sekretariat">
            <a href="sekretariat.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data Sekretariat</a
            >
            <a href="penanggungjawab_sekretariat.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data PJ Sekretariat</a
            >
            <a href="data_pt.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data Pendidikan Tinggi</a
            >
            <a href="bpt.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">Data BPT Sekretariat</a>
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#komunitas"
          >
            <i class="bi bi-house-fill me-2"></i> Komunitas/Sekolah <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="komunitas">
            <a href="sekolah.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data Komunitas/Sekolah</a
            >
            <a href="penanggungjawab.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data PJ Sekolah</a
            >
            <a href="konfirmasi_penanggungjawab.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Konfirmasi PJ Sekolah Baru</a
            >
            <a href="sk.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">SK Beasiswa</a>
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#anakasuh"
          >
            <i class="bi bi-person-lines-fill me-2"></i> Anak Asuh <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="anakasuh">
            <a href="anak_asuh.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">List Anak Asuh</a>
            <a href="pengajuan_anakasuh_baru.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Konfirmasi Anak Asuh Baru</a
            >
            <a href="konfirmasi_naik_jenjang.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Konfirmasi Kenaikan Jenjang</a
            >
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#transferbeasiswa"
          >
            <i class="bi bi-receipt me-2"></i> Transfer Beasiswa <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="transferbeasiswa">
            <a href="transfer_beasiswa.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data Transfer Beasiswa</a
            >
            <a href="status_transfer.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Status Transfer Beasiswa</a
            >
            <a href="ganti_rekening.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Penggantian No Rekening</a
            >
            <a href="pengembalian_dana.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Pengembalian Dana Berlebih</a
            >
            <a
              href="#"
              class="list-group-item list-group-item-action bg-aat-grey ps-5"
              data-bs-toggle="modal"
              data-bs-target="#rekeningYayasanModal"
              >Rekening Yayasan</a
            >
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#pembayaranDonasi"
          >
            <i class="bi bi-cash-coin me-2"></i> Pembayaran & Donasi <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="pembayaranDonasi">
            <a href="konfirmasi_status_pembayaran.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Konfirmasi & Status Pembayaran</a
            >
            <a href="donasi_langsung.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Donasi Langsung</a
            >
            <a href="transfer_tak_dikenal.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Transfer Tak Dikenal</a
            >
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#laporan"
          >
            <i class="bi bi-journal-text me-2"></i> Laporan <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="laporan">
            <a href="laporan_donatur.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Donatur</a
            >
            <a href="laporan_sekretariat.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Sekretariat</a
            >
            <a href="laporan_komunitas.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Komunitas/Sekolah</a
            >
            <a href="laporan_anakasuh.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Anak Asuh</a
            >
            <a href="laporan_raport_skl_ijasah.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Raport, SKL, & Ijasah</a
            >
            <a href="rekup_transfer_beasiswa.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Rekup Transfer Beasiswa</a
            >
            <a href="rekup_kode_unik.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Rekup Kode Unik</a
            >
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#pengaturan"
          >
            <i class="bi bi-gear me-2"></i> Pengaturan <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="pengaturan">
            <a href="admin.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">Manajemen Admin</a>
            <a href="tahun_ajaran.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">Tahun Ajaran</a>
          </div>
          <button
            type="button"
            class="list-group-item list-group-item-action bg-aat text-white"
            onclick="openPage('kontak')"
          >
            <i class="bi bi-house me-2"></i> Hubungi Kami
          </button>
        </div>

        <!-- Footer Mobile -->
        <div class="p-3 border-top small text-center text-white d-lg-none">
          Â© Yayasan AAT Indonesia <br />
          Developed by <span class="fw-bold">Omah IT</span> <br />
          Maintained by <span class="fw-bold">Mandhira IT</span>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation (Mobile) -->
    <div class="mobile-bottom-nav">
      <a href="index.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-house-fill fs-4"></i><br />
        <small>Beranda</small>
      </a>

      <a href="transfer_beasiswa.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-receipt fs-4"></i><br />
        <small>Transfer Beasiswa</small>
      </a>

      <a href="status_transfer.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-card-checklist fs-4"></i><br />
        <small>Status Transfer</small>
      </a>

      <a href="raport_skl_ijasah.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-journal-text fs-4"></i><br />
        <small>Raport</small>
      </a>
    </div>

    <main class="container-fluid pt-3 pt-lg-5 pb-5 mt-5">
      <div class="d-none d-lg-block mb-5"></div>
      <h3 class="text-center page-title d-none d-lg-block">Riwayat Donasi Donatur</h3>
      <div class="container-fluid mb-5 container-wrapper">
        <!-- âœ… Tombol Toggle Filter (Mobile) -->
        <div class="d-md-none mb-2">
          <button
            class="btn btn-outline-primary w-100"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#filterCollapse"
            aria-expanded="false"
            aria-controls="filterCollapse"
          >
            <i class="bi bi-funnel"></i> Tampilkan Filter
          </button>
        </div>

        <div class="row">
          <!-- âœ… FILTER -->
          <div class="col-md-2 mb-3">
            <div id="filterCollapse" class="collapse d-md-block">
              <div class="filter-section shadow-sm p-3 bg-white rounded ft-12">
                <div class="mb-3">
                  <button class="btn btn-outline-primary btn-sm w-100">
                    <i class="bi bi-download"></i> Export
                  </button>
                </div>
                <label for="tahunAjaranFilter">Tahun Ajaran:</label>
                <select id="tahunAjaranFilter" class="form-select form-select-sm mb-2">
                  <option selected="selected">2025/2026</option>
                  <option>2024/2025</option>
                  <option>2023/2024</option>
                </select>

                <label>Status:</label>
                <div class="form-check">
                  <input class="form-check-input status" type="checkbox" value="Aktif" id="aktif" checked />
                  <label class="form-check-label badge bg-success" for="aktif">Aktif</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input status" type="checkbox" value="Pending" id="pending" />
                  <label class="form-check-label badge bg-yellow" for="pending">Pending</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input status" type="checkbox" value="Dormant" id="dormant" />
                  <label class="form-check-label badge bg-warning" for="dormant">Dormant</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input status" type="checkbox" value="Stop" id="stop" />
                  <label class="form-check-label badge bg-secondary" for="stop">Stop</label>
                </div>
                <div class="form-check mb-3">
                  <input class="form-check-input status" type="checkbox" value="Tidak Aktif" id="nonaktif" />
                  <label class="form-check-label badge bg-danger" for="nonaktif">Tidak Aktif</label>
                </div>
                <label>Status Donasi:</label>
                <div class="form-check">
                  <input class="form-check-input status_donasi" type="checkbox" value="Lunas" id="lunas" />
                  <label class="form-check-label badge bg-primary" for="lunas">Lunas</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input status_donasi" type="checkbox" value="Kelebihan" id="kelebihan" />
                  <label class="form-check-label badge bg-info" for="kelebihan">Kelebihan</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input status_donasi" type="checkbox" value="Kekurangan" id="kekurangan" />
                  <label class="form-check-label badge bg-secondary" for="kekurangan">Kekurangan</label>
                </div>

                <div class="mt-3 p-2 text-center rounded bg-light border card-total">
                  <strong class="text-muted fw-semibold d-block text-wrap">
                    Total Komitmen <br />
                    <span class="text-primary fw-bold d-block">Rpx.xxx.xxx.000/Tahun</span><br />
                    Total Transfer <br />
                    <span class="text-aat fw-bold d-block">Rpx.xxx.xxx.000/Tahun</span><br />
                    Belum Transfer <br />
                    <span class="text-danger fw-bold d-block">Rpx.xxx.xxx.000/Tahun</span><br />
                  </strong>
                </div>
              </div>
            </div>
          </div>

          <!-- âœ… GRID ANAK ASUH -->
          <div class="col-md-10">
            <div class="table-responsive d-none d-lg-block">
              <table
                id="datatable"
                class="table table-striped table-bordered align-middle text-center bg-white shadow-sm"
              >
                <thead class="table-light">
                  <tr>
                    <th>No</th>
                    <th>ID</th>
                    <th>Nama</th>
                    <th>Status</th>
                    <th>SPP/bln</th>
                    <th>PT/bln</th>
                    <th>Opr/bln</th>
                    <th>Donasi/bln</th>
                    <th>Total Komitmen</th>
                    <th>Total Transfer</th>
                    <th>Sisa</th>
                    <th>Last Reminder</th>
                    <th>Lanjut Donasi</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
              <span class="text-danger fw-italic m-2 d-none d-lg-block">Klik kanan mouse untuk memunculkan menu aksi</span>
            </div>
          </div>
        </div>

        <!-- âœ… CARD LIST UNTUK MOBILE -->
        <div class="card-mobile d-lg-none">
          <!-- ðŸ” PENCARIAN MOBILE -->
          <div class="input-group mb-3 shadow-sm">
            <span class="input-group-text bg-white border-end-0"><i class="bi bi-search"></i></span>
            <input type="text" id="searchCard" class="form-control border-start-0" placeholder="Cari donatur..." />
          </div>

          <!-- LIST CARD -->
          <div id="cardList" class="row g-2"></div>

          <!-- PAGINATION MOBILE -->
          <div class="pagination-mobile-container d-flex justify-content-center mt-3">
            <nav><ul class="pagination" id="paginationMobile"></ul></nav>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer Desktop (sticky di bawah halaman) -->
    <footer class="fixed-bottom text-white text-center py-2 mt-auto d-none d-lg-block bg-aat">
      <small>
        Copyright Â© Yayasan AAT Indonesia | Developed by
        <span class="fw-bold">Omah IT - Gateway to Your IT Solutions</span> | Maintained by
        <span class="fw-bold">Mandhira IT</span>
        <br />
        Gunakan Browser <span class="fw-bold">Google Chrome</span> atau
        <span class="fw-bold">Mozilla Firefox</span> untuk tampilan terbaik.
        <div class="d-none d-lg-block mb-5"></div>
      </small>
    </footer>

    <!-- Context Menu for Right-Click Actions -->
    <ul id="contextMenu" class="dropdown-menu" style="display: none; position: absolute; z-index: 1050">
      <li>
        <a class="dropdown-item" href="edit_donasi.html" id="editAction"> <i class="bi bi-pencil"></i> Edit Donasi </a>
      </li>
      <li>
        <a class="dropdown-item" href="assign_donasi.html" id="assignAction"> <i class="bi bi-person-check"></i> Assign Donasi </a>
      </li>
      <li>
        <a class="dropdown-item" href="#" id="reminderAction" onclick="reminderAction()"> <i class="bi bi-bell"></i> Kirim Reminder </a>
      </li>
      <li>
        <a class="dropdown-item" href="#" id="rincianAction" onclick="rincianAction()"> <i class="bi bi-receipt"></i> Kirim Rincian Donasi </a>
      </li>
    </ul>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/style.js"></script>
    <!-- jQuery (dibutuhkan oleh DataTables) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>

    <script src="../assets/js/datatable.init.js"></script>
    <!-- Sweet Alerts Js-->
    <script src="../assets/plugins/sweetalert2/sweetalert2.min.js"></script>
    <script src="../assets/plugins/sweetalert2/sweetshow.js"></script>

    <script>
      // ===============================
      // Daftar Nama Donatur
      // ===============================
      const namaList = [
        'Ahmad Fauzi',
        'Budi Santoso',
        'Citra Dewi',
        'Dedi Rahman',
        'Eka Sari',
        'Fajar Nugroho',
        'Gita Permata',
        'Hadi Wijaya',
        'Indah Lestari',
        'Joko Susilo',
        'Kartika Sari',
        'Lutfi Hakim',
        'Maya Sari',
        'Nanda Putra',
        'Oka Wibowo',
        'Putri Ayu',
        'Rudi Hartono',
        'Sari Indah',
        'Taufik Rahman',
        'Umi Kalsum',
        'Vina Sari',
        'Wahyu Nugroho',
        'Yuniarti',
        'Zainal Abidin',
        'Ani Suryani',
        'Bambang Setiawan',
        'Cici Handayani',
        'Dian Purnama',
        'Eko Prasetyo',
        'Fina Sari',
      ];

      const statusList = ['Aktif', 'Pending', 'Dormant', 'Stop', 'Tidak Aktif'];
      const lanjutDonasiList = ['Belum Respon', 'Ya', 'Tidak'];
      const statusDonasiList = ['Lunas', 'Kelebihan', 'Kekurangan'];
      const TahunAjaranList = ['2025/2026', '2024/2025', '2023/2024'];
      const currentTahun = '2025/2026';

      // ===============================
      // Badge Class Functions
      // ===============================
      function getStatusClass(status) {
        switch (status) {
          case 'Aktif':
            return 'success';
          case 'Pending':
            return 'warning';
          case 'Dormant':
            return 'yellow';
          case 'Stop':
            return 'secondary';
          case 'Tidak Aktif':
            return 'danger';
          default:
            return 'secondary';
        }
      }

      function getSisaClass(sisaNumeric) {
        if (sisaNumeric < 0) {
          return 'bg-info'; // Lunas Berlebih
        } else if (sisaNumeric > 0) {
          return 'bg-secondary'; // Belum Lunas
        } else {
          return 'bg-primary'; // Lunas
        }
      }

      function getStatusDonasiClass(statusDonasi) {
        switch (statusDonasi) {
          case 'Lunas':
            return 'primary';
          case 'Kelebihan':
            return 'info';
          case 'Kekurangan':
            return 'secondary';
        }
      }

      // ===============================
      // Generate Data Donatur
      // ===============================
      const donaturData = [];
      let no = 1;
      for (let i = 0; i < 50; i++) {
        const nama = namaList[Math.floor(Math.random() * namaList.length)];
        const status = statusList[Math.floor(Math.random() * statusList.length)];
        const sppValue = Math.floor(Math.random() * 500000) + 100000;
        const ptValue = Math.floor(Math.random() * 500000) + 100000;
        const oprValue = Math.floor(Math.random() * 500000) + 100000;
        const donasiValue = Math.floor(Math.random() * 500000) + 100000;
        const komitmenValue = sppValue + ptValue + oprValue + donasiValue;
        let transferValue;
        if (Math.random() < 0.2) {
          // 20% chance for sisa == 0
          transferValue = komitmenValue;
        } else {
          transferValue = Math.floor(Math.random() * komitmenValue) + 500000;
        }
        const sisaValue = komitmenValue - transferValue;
        const lastReminder = new Date(Date.now() - Math.random() * 365 * 24 * 60 * 60 * 1000).toLocaleDateString(
          'id-ID'
        );
        const lanjut_donasi = lanjutDonasiList[Math.floor(Math.random() * lanjutDonasiList.length)];
        const status_donasi = statusDonasiList[Math.floor(Math.random() * statusDonasiList.length)];
        const tahun_ajaran = TahunAjaranList[Math.floor(Math.random() * TahunAjaranList.length)];
        const id = `DN-${String(i + 1).padStart(4, '0')}`;

        donaturData.push({
          no: no++,
          id,
          nama,
          status,
          spp_bln: `${sppValue.toLocaleString('id-ID')}`,
          pt_bln: `${ptValue.toLocaleString('id-ID')}`,
          opr_bln: `${oprValue.toLocaleString('id-ID')}`,
          donasi_bln: `${donasiValue.toLocaleString('id-ID')}`,
          total_komitmen: `${komitmenValue.toLocaleString('id-ID')}`,
          total_transfer: `${transferValue.toLocaleString('id-ID')}`,
          sisa: `${sisaValue.toLocaleString('id-ID')}`,
          sisa_numeric: sisaValue,
          last_reminder: lastReminder,
          lanjut_donasi,
          status_donasi,
          tahun_ajaran,
        });
      }

      const cardList = document.getElementById('cardList');
      const searchCard = document.getElementById('searchCard');
      const paginationMobile = document.getElementById('paginationMobile');
      let currentPageMobile = 1;
      const itemsPerPageMobile = 10;

      // Filter elements
      const statusCheckboxes = document.querySelectorAll('.status');
      const statusDonasiCheckboxes = document.querySelectorAll('.status_donasi');
      const tahunAjaranFilter = document.getElementById('tahunAjaranFilter');

      // ===============================
      // Get selected status
      // ===============================
      function getSelectedStatus(checkboxes) {
        return Array.from(checkboxes)
          .filter(cb => cb.checked)
          .map(cb => cb.value);
      }

      // ===============================
      // Filter data
      // ===============================
      function parseRupiahToNumber(rpString) {
        if (!rpString) return 0;
        return Number(rpString.replace(/Rp/g, '').replace(/\./g, '').replace(/,/g, '').replace(/\s/g, ''));
      }

      function filterData(data, selectedStatus, selectedStatusDonasi, selectedTahun) {
        return data.filter(item => {
          // Konversi sisa menjadi angka
          const sisaNumber = parseRupiahToNumber(item.sisa);

          // Filter status biasa
          const statusMatch = selectedStatus.length === 0 || selectedStatus.includes(item.status);

          // Filter status donasi berdasarkan SISA
          let statusDonasiMatch = true;

          if (selectedStatusDonasi.length > 0) {
            statusDonasiMatch = selectedStatusDonasi.some(status => {
              if (status === 'Lunas') return sisaNumber === 0;
              if (status === 'Kelebihan') return sisaNumber < 0;
              if (status === 'Kekurangan') return sisaNumber > 0;
              return false;
            });
          }

          // Filter Tahun Ajaran
          const tahunMatch = selectedTahun === '' || item.tahun_ajaran === selectedTahun;

          return statusMatch && statusDonasiMatch && tahunMatch;
        });
      }

      // ===============================
      // Initialize DataTable (Desktop) - once only
      // ===============================
      let dataTable; // Global variable to hold DataTable instance

      function renderTable() {
        const tableBody = document.querySelector('#datatable tbody');

        tableBody.innerHTML = donaturData
          .map(
            d => `
        <tr class="table-row" data-id="${d.id}" data-nama="${d.nama}">
          <td data-label="No"><strong>${d.no}</strong></td>
          <td data-label="ID">${d.id}</td>
          <td data-label="Nama">${d.nama}</td>
          <td data-label="Status"><span class="badge bg-${getStatusClass(d.status)}">${d.status}</span></td>
          <td data-label="SPP/bln">${d.spp_bln}</td>
          <td data-label="PT/bln">${d.pt_bln}</td>
          <td data-label="Opr/bln">${d.opr_bln}</td>
          <td data-label="Donasi/bln">${d.donasi_bln}</td>
          <td data-label="Total Komitmen">${d.total_komitmen}</td>
          <td data-label="Total Transfer">${d.total_transfer}</td>
          <td data-label="Sisa"><span class="badge ${getSisaClass(d.sisa_numeric)}">${d.sisa}</span></td>
          <td data-label="Last Reminder">${d.last_reminder}</td>
          <td data-label="Lanjut Donasi">${d.lanjut_donasi}</td>
        </tr>
      `
          )
          .join('');

        // Add right-click context menu to rows
        tableBody.querySelectorAll('.table-row').forEach(row => {
          row.addEventListener('contextmenu', function (e) {
            e.preventDefault();
            const contextMenu = document.getElementById('contextMenu');
            contextMenu.style.display = 'block';
            contextMenu.style.left = e.pageX + 'px';
            contextMenu.style.top = e.pageY + 'px';
            // Store the row data for actions
            contextMenu.dataset.rowId = this.dataset.id;
            contextMenu.dataset.rowNama = this.dataset.nama;
          });
        });

        // Initialize DataTable after populating the table
        if (!dataTable) {
          dataTable = $('#datatable').DataTable();
        }
      }

      // ===============================
      // Filter DataTable using API (no destroy/recreate)
      // ===============================
      function filterTable() {
        const selectedStatus = getSelectedStatus(statusCheckboxes);
        const selectedStatusDonasi = getSelectedStatus(statusDonasiCheckboxes);
        const selectedTahun = tahunAjaranFilter.value;

        // Clear previous search functions
        $.fn.dataTable.ext.search = [];

        // Push new search function
        $.fn.dataTable.ext.search.push(function (settings, data, dataIndex) {
          const rowData = donaturData[dataIndex];

          if (!rowData) return true;

          // --- STATUS umum ---
          if (selectedStatus.length > 0 && !selectedStatus.includes(rowData.status)) {
            return false;
          }

          // --- STATUS DONASI berdasarkan nilai SISA ---
          const sisaNumber = rowData.sisa_numeric;

          if (selectedStatusDonasi.length > 0) {
            const statusDonasiMatch = selectedStatusDonasi.some(st => {
              if (st === 'Lunas') return sisaNumber === 0;
              if (st === 'Kelebihan') return sisaNumber < 0;
              if (st === 'Kekurangan') return sisaNumber > 0;
              return false;
            });

            if (!statusDonasiMatch) return false;
          }

          // --- Tahun Ajaran ---
          if (selectedTahun !== '' && rowData.tahun_ajaran !== selectedTahun) {
            return false;
          }

          return true;
        });

        dataTable.draw();
      }

      // ===============================
      // Render Cards (Mobile)
      // ===============================
      function renderCards() {
        if (!cardList || !searchCard || !paginationMobile) {
          console.log('Required DOM elements not found');
          return;
        }

        const searchTerm = searchCard.value.toLowerCase();
        const selectedStatus = getSelectedStatus(statusCheckboxes);
        const selectedStatusDonasi = getSelectedStatus(statusDonasiCheckboxes);
        const selectedTahun = tahunAjaranFilter.value;

        let filtered = filterData(donaturData, selectedStatus, selectedStatusDonasi, selectedTahun);

        // Apply search
        if (searchTerm) {
          filtered = filtered.filter(
            item => item.nama.toLowerCase().includes(searchTerm) || item.id.toLowerCase().includes(searchTerm)
          );
        }

        // Pagination
        const totalPages = Math.ceil(filtered.length / itemsPerPageMobile);
        const start = (currentPageMobile - 1) * itemsPerPageMobile;
        const end = start + itemsPerPageMobile;
        const paginated = filtered.slice(start, end);

        cardList.innerHTML = paginated
          .map(
            item => `
              <div class="col-12">
                <div class="card shadow-sm p-3 mb-2" data-id="${item.id}" data-nama="${item.nama}">
                  <h5 class="card-title fw-bold d-flex justify-content-between align-items-center">
                    ${item.nama}
                    <i class="bi bi-three-dots-vertical card-menu" style="cursor: pointer;"></i>
                  </h5>
                  <div class="divider-1"></div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">ID</div>
                    <div class="col-7">${item.id}</div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Status</div>
                    <div class="col-7">
                      <span class="badge bg-${getStatusClass(item.status)}">${item.status}</span>
                    </div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Komitmen</div>
                    <div class="col-7">${item.total_komitmen}</div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Total Transfer</div>
                    <div class="col-7">${item.total_transfer}</div>
                  </div>
                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Sisa</div>
                    <div class="col-7"><span class="badge ${getSisaClass(item.sisa_numeric)}">${item.sisa}</span></div>
                  </div>
                </div>
              </div>`
          )
          .join('');

        // Generate Pagination
        function generatePagination(totalPages, currentPage) {
          let html = '';
          // Previous button
          html += `<li class="page-item ${
            currentPage === 1 ? 'disabled' : ''
          }"><a class="page-link" href="#" data-page="${currentPage - 1}">Previous</a></li>`;
          // Page numbers: show current -1, current, current +1, clamped
          const startPage = Math.max(1, currentPage - 1);
          const endPage = Math.min(totalPages, currentPage + 1);
          for (let i = startPage; i <= endPage; i++) {
            html += `<li class="page-item ${
              i === currentPage ? 'active' : ''
            }"><a class="page-link" href="#" data-page="${i}">${i}</a></li>`;
          }
          // Next button
          html += `<li class="page-item ${
            currentPage === totalPages ? 'disabled' : ''
          }"><a class="page-link" href="#" data-page="${currentPage + 1}">Next</a></li>`;
          return html;
        }
        paginationMobile.innerHTML =
          totalPages > 1
            ? `<ul class="pagination justify-content-center">${generatePagination(totalPages, currentPageMobile)}</ul>`
            : '';

        paginationMobile.querySelectorAll('.page-link').forEach(link => {
          link.addEventListener('click', e => {
            e.preventDefault();
            const page = parseInt(e.target.dataset.page);
            if (page && page !== currentPageMobile && page >= 1 && page <= totalPages) {
              currentPageMobile = page;
              renderCards();
            }
          });
        });
      }

      // ===============================
      // Event Listener
      // ===============================
      searchCard.addEventListener('input', () => {
        currentPageMobile = 1;
        renderCards();
      });

      statusCheckboxes.forEach(cb => {
        cb.addEventListener('change', () => {
          filterTable();
          currentPageMobile = 1;
          renderCards();
        });
      });

      statusDonasiCheckboxes.forEach(cb => {
        cb.addEventListener('change', () => {
          filterTable();
          currentPageMobile = 1;
          renderCards();
        });
      });

      tahunAjaranFilter.addEventListener('change', () => {
        filterTable();
        currentPageMobile = 1;
        renderCards();
      });

      // ===============================
      // Inisialisasi Awal
      // ===============================
      renderTable();
      filterTable();
      renderCards();

      function reminderAction() {
        swal_confirm('Konfirmasi', 'Kamu yakin akan mengirimkan Email/WA Reminder ke Donatur tersebut?', 'question').then(
          result => {
            if (result.isConfirmed) {
              swal_alert('Berhasil', 'Reminder telah dikirim ke donatur', 'success');
            }
          }
        );
      }
      function rincianAction() {
        swal_confirm(
          'Konfirmasi',
          'Kamu yakin akan mengirimkan Email/WA Rincian Donasi ke Donatur tersebut?',
          'warning'
        ).then(result => {
          if (result.isConfirmed) {
            swal_alert('Berhasil', 'Rincian Donasi telah dikirim ke donatur!', 'success');
          }
        });
      }
    </script>
  </body>
</html>
