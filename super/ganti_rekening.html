<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Responsive Admin Template</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

    <link href="../assets/css/style.css" rel="stylesheet" />
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" />
    <!-- Sweet Alerts css -->
    <link href="../assets/plugins/sweetalert2/sweetalert2.min.css" rel="stylesheet" type="text/css" />

    <!-- Select2 CSS & JS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <!-- Date Range Picker -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
  </head>
  <body class="d-flex flex-column min-vh-100">
    <!-- Header fixed -->
    <header class="fixed-top shadow-sm">
      <!-- Branding Panel (Desktop) -->
      <div class="branding d-none d-lg-flex panel-header align-items-center">
        <img src="../assets/img/logo_AAT.png" alt="Logo" />
        <div class="ms-2 me-auto">
          <span class="fw-bold">Sistem Informasi Anak Asuh</span>
        </div>
        <!-- Tahun Ajaran + Datetime -->
        <div class="text-center me-3">
          <h4 class="mb-0">TA. 2025/2026</h4>
          <div class="datetime" id="currentDateTime"></div>
        </div>
      </div>

      <!-- Navbar Desktop -->
      <nav class="navbar navbar-expand-lg custom-navbar">
        <div class="container-fluid">
          <!-- LEFT MENU -->
          <ul class="navbar-nav me-auto nav-left">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Beranda</a>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="donaturDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Donatur
              </a>
              <ul class="dropdown-menu" aria-labelledby="donaturDropdown">
                <li><a class="dropdown-item" href="donatur.html">List Donatur</a></li>
                <li><a class="dropdown-item" href="form_donatur.html">Input Donatur</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="riwayat_donasi_donatur.html">Riwayat Donasi Donatur</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="lelang.html">Pemilihan Anak Asuh oleh Donatur</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="sekretariatDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Sekretariat
              </a>
              <ul class="dropdown-menu" aria-labelledby="sekretariatDropdown">
                <li><a class="dropdown-item" href="sekretariat.html">Data Sekretariat</a></li>
                <li><a class="dropdown-item" href="penanggungjawab_sekretariat.html">Data PJ Sekretariat</a></li>
                <li><a class="dropdown-item" href="form_pjs.html">Input PJ Sekretariat</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="data_pt.html">Data Pendidikan Tinggi</a></li>
                <li><a class="dropdown-item" href="form_pt.html">Input Pendidikan Tinggi</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="bpt.html">Data BPT Sekretariat</a></li>
                <li><a class="dropdown-item" href="form_bpt.html">Input BPT Sekretariat</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="komunitasDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Komunitas/Sekolah
              </a>
              <ul class="dropdown-menu" aria-labelledby="komunitasDropdown">
                <li><a class="dropdown-item" href="sekolah.html">Data Komunitas/Sekolah</a></li>
                <li><a class="dropdown-item" href="form_sekolah.html">Input Komunitas/Sekolah</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="penanggungjawab.html">Data PJ Sekolah</a></li>
                <li><a class="dropdown-item" href="form_penanggungjawab.html">Input PJ Sekolah</a></li>
                <li><a class="dropdown-item" href="konfirmasi_penanggungjawab.html">Konfirmasi PJ Sekolah Baru</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#skBeasiswaModal"
                    >SK Beasiswa</a
                  >
                </li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="anakAsuhDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Anak Asuh
              </a>
              <ul class="dropdown-menu" aria-labelledby="anakAsuhDropdown">
                <li><a class="dropdown-item" href="anak_asuh.html">List Anak Asuh</a></li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Input Anak Asuh</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="form_anak_asuh.html">Input Manual</a></li>
                    <li><a class="dropdown-item" href="import_anak_asuh.html">Import dari Excel</a></li>
                  </ul>
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="pengajuan_anakasuh_baru.html">Konfirmasi Anak Asuh Baru</a></li>
                <li><a class="dropdown-item" href="konfirmasi_naik_jenjang.html">Konfirmasi Kenaikan Jenjang</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="raport_skl_ijasah.html">Raport, SKl & Ijazah</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="transferBeasiswaDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Transfer Beasiswa
              </a>
              <ul class="dropdown-menu" aria-labelledby="transferBeasiswaDropdown">
                <li><a class="dropdown-item" href="transfer_beasiswa.html">Data Transfer Beasiswa</a></li>
                <li><a class="dropdown-item" href="status_transfer.html">Status Transfer Beasiswa</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="ganti_rekening.html">Penggantian No Rekening</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="pengembalian_dana.html">Pengembalian Dana Berlebih</a></li>
                <li>
                  <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#rekeningYayasanModal"
                    >Rekening Yayasan</a
                  >
                </li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="pembayaranDonasiDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Pembayaran & Donasi
              </a>
              <ul class="dropdown-menu" aria-labelledby="pembayaranDonasiDropdown">
                <li><a class="dropdown-item" href="konfirmasi_status_pembayaran.html">Konfirmasi & Status Pembayaran</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="donasi_langsung.html">Donasi Langsung</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="transfer_tak_dikenal.html">Transfer Tak Dikenal</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="laporanDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Laporan
              </a>
              <ul class="dropdown-menu" aria-labelledby="laporanDropdown">
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Laporan Donatur</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="laporan_donatur.html">Cari per ID</a></li>
                    <li><a class="dropdown-item" href="statistik_donatur.html">Statistik Umum</a></li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Laporan Sekretariat</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="laporan_sekretariat.html">Cari per Nama</a></li>
                    <li><a class="dropdown-item" href="statistik_sekretariat.html">Statistik Umum</a></li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Laporan Komunitas</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="laporan_komunitas.html">Cari per ID</a></li>
                    <li><a class="dropdown-item" href="statistik_komunitas.html">Statistik Umum</a></li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Laporan Anak Asuh</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="laporan_anakasuh.html">Cari per ID</a></li>
                    <li><a class="dropdown-item" href="statistik_anakasuh.html">Statistik Umum</a></li>
                  </ul>
                </li>
                <li>
                  <a class="dropdown-item" href="laporan_raport_skl_ijasah.html">Laporan Raport, SKL, & Ijasah</a>
                </li>
                <li class="dropdown-submenu">
                  <a class="dropdown-item" href="#">Rekup Transfer Beasiswa</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="rekup_status_transfer_beasiswa.html">Status Transfer</a></li>
                    <li><a class="dropdown-item" href="rekup_nominal_transfer_beasiswa.html">Nominal</a></li>
                  </ul>
                </li>
                <li><a class="dropdown-item" href="rekup_kode_unik.html">Rekup Kode Unik</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="settingDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Pengaturan
              </a>
              <ul class="dropdown-menu" aria-labelledby="settingDropdown">
                <li><a class="dropdown-item" href="admin.html">Manajemen Admin</a></li>
                <li><a class="dropdown-item" href="tahun_ajaran.html">Tahun Ajaran</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="kontakDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Hubungi Kami
              </a>
              <ul class="dropdown-menu" aria-labelledby="kontakDropdown">
                <li>
                  <a class="dropdown-item" href="https://wa.me/628xxxxxxxxx" target="_blank"
                    ><i class="bi bi-whatsapp me-2"></i>WhatsApp</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="mailto:beasiswa@aat.or.id"><i class="bi bi-envelope me-2"></i>Email</a>
                </li>
                <li>
                  <a class="dropdown-item" href="https://instagram.com/aat.indonesia" target="_blank"
                    ><i class="bi bi-instagram me-2"></i>Instagram</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="https://youtube.com/@aatindonesia" target="_blank"
                    ><i class="bi bi-youtube me-2"></i>YouTube</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="https://facebook.com/aatindonesia" target="_blank"
                    ><i class="bi bi-facebook me-2"></i>Facebook</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="https://x.com/aat_indonesia" target="_blank"
                    ><i class="bi bi-twitter-x me-2"></i>X (Twitter)</a
                  >
                </li>
              </ul>
            </li>
          </ul>

          <!-- RIGHT PROFILE & NOTIFICATION MENU -->
          <ul class="navbar-nav ms-auto align-items-center nav-right">
            <!-- ðŸ”” Notifikasi -->
            <li class="nav-item dropdown me-2">
              <a
                class="nav-link position-relative"
                href="#"
                id="notifDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="bi bi-bell" style="font-size: 14px"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"> 3 </span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notifDropdown">
                <li><h6 class="dropdown-header">Notifikasi</h6></li>
                <li><a class="dropdown-item small" href="#">Pembayaran donasi berhasil</a></li>
                <li><a class="dropdown-item small" href="#">SPP anak asuh sudah jatuh tempo</a></li>
                <li><a class="dropdown-item small" href="#">Laporan bulanan tersedia</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item text-center small text-primary" href="#">Lihat semua</a></li>
              </ul>
            </li>

            <!-- ðŸ‘¤ Profil -->
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle d-flex align-items-center"
                href="#"
                id="profileDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <img
                  src="../assets/img/logo_AAT.png"
                  alt="User"
                  width="30"
                  height="30"
                  class="rounded-circle profile-img shadow-sm me-2"
                />
                <span class="fw-semibold ft-12">ADM-NAS-XXXX</span>
              </a>

              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                <li>
                  <a class="dropdown-item" href="profil.html">Profil</a>
                </li>

                <li>
                  <a class="dropdown-item" href="ubah_password.html">Ubah Password</a>
                </li>

                <!-- SUBMENU SEKRETARIAT -->
                <li class="dropdown-submenu">
                  <a class="dropdown-item d-flex justify-content-between align-items-center" href="#">
                    Sekretariat : <strong>All</strong>
                    <i class="bi bi-caret-down-fill ms-2"></i>
                  </a>

                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item active" href="#">All</a></li>
                    <li><a class="dropdown-item" href="#">Yogyakarta</a></li>
                    <li><a class="dropdown-item" href="#">Semarang</a></li>
                    <li><a class="dropdown-item" href="#">Purwokerto</a></li>
                    <li><a class="dropdown-item" href="#">Madiun</a></li>
                    <li><a class="dropdown-item" href="#">Malang</a></li>
                    <li><a class="dropdown-item" href="#">Bandung</a></li>
                  </ul>
                </li>

                <li><hr class="dropdown-divider" /></li>

                <li>
                  <a class="dropdown-item text-danger" href="#">Logout</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
    </header>

    <!-- Navbar Mobile (atas) -->
    <nav class="fixed-top navbar navbar-dark bg-dark d-lg-none bg-aat">
      <div class="container-fluid">
        <button class="btn btn-outline-light" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
          <i class="bi bi-list"></i>
        </button>
        <span class="navbar-brand mx-auto">Penggantian No. Rekening</span>
        <div class="d-flex">
          <div class="dropdown me-1">
            <button
              class="btn btn-outline-light position-relative"
              type="button"
              id="mobileNotifDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-bell"></i>
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">3</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="mobileNotifDropdown">
              <li><h6 class="dropdown-header">Notifikasi</h6></li>
              <li><a class="dropdown-item small" href="#">Pembayaran donasi berhasil</a></li>
              <li><a class="dropdown-item small" href="#">SPP anak asuh sudah jatuh tempo</a></li>
              <li><a class="dropdown-item small" href="#">Laporan bulanan tersedia</a></li>
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item text-center small text-primary" href="#">Lihat semua</a></li>
            </ul>
          </div>
          <div class="dropdown">
            <button
              class="btn btn-outline-light"
              type="button"
              id="mobileProfileDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="mobileProfileDropdown">
              <li><a class="dropdown-item" href="profil.html">Profil</a></li>
              <li><a class="dropdown-item" href="ubah_password.html">Ubah Password</a></li>
              <li><hr class="dropdown-divider" /></li>
              <!-- SUBMENU SEKRETARIAT -->
              <li class="dropdown-submenu">
                <a class="dropdown-item d-flex justify-content-between align-items-center" href="#">
                  Sekretariat : <strong>All</strong>
                  <i class="bi bi-caret-down-fill ms-2"></i>
                </a>

                <ul class="dropdown-menu">
                  <li><a class="dropdown-item active" href="#">All</a></li>
                  <li><a class="dropdown-item" href="#">Yogyakarta</a></li>
                  <li><a class="dropdown-item" href="#">Semarang</a></li>
                  <li><a class="dropdown-item" href="#">Purwokerto</a></li>
                  <li><a class="dropdown-item" href="#">Madiun</a></li>
                  <li><a class="dropdown-item" href="#">Malang</a></li>
                  <li><a class="dropdown-item" href="#">Bandung</a></li>
                </ul>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item text-danger" href="#">Logout</a></li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <!-- Offcanvas Sidebar (Mobile) -->
    <div class="offcanvas offcanvas-start bg-dark text-white bg-aat" tabindex="-1" id="mobileSidebar">
      <!-- Header Sidebar -->
      <div class="offcanvas-header border-bottom">
        <div class="d-flex align-items-center">
          <img
            src="../assets/img/logo_AAT.png"
            class="rounded-circle me-2 profile-img"
            alt="Logo"
            width="40"
            height="40"
          />
          <span class="fw-bold">Sistem Informasi Anak Asuh</span>
        </div>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
      </div>

      <!-- Profil User -->
      <div class="p-4 border-bottom text-center bg-aat-grey bg-gradient text-black">
        <img
          src="../assets/img/logo_AAT.png"
          class="rounded-circle profile-img"
          alt="User"
          width="80"
          height="80"
        />
        <h6 class="mt-1">Ki Anom</h6>
        <small class="mb-0">ADM-XXXX</small><br />
        <small class="mb-0">Super Admin</small>
      </div>

      <!-- Body Sidebar -->
      <div class="offcanvas-body d-flex flex-column p-0">
        <!-- Menu scrollable -->
        <div class="list-group list-group-flush flex-grow-1 overflow-auto">
          <a href="index.html" class="list-group-item list-group-item-action bg-aat text-white">
            <i class="bi bi-house me-2"></i> Beranda
          </a>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#donatur"
          >
            <i class="bi bi-person me-2"></i> Donatur <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="donatur">
            <a href="donatur.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">List Donatur</a>
            <a href="riwayat_donasi.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Riwayat Donasi Donatur</a
            >
            <a href="lelang.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Pemilihan Anak Asuh oleh Donatur</a
            >
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#sekretariat"
          >
            <i class="bi bi-building me-2"></i> Sekretariat <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="sekretariat">
            <a href="sekretariat.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data Sekretariat</a
            >
            <a href="penanggungjawab_sekretariat.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data PJ Sekretariat</a
            >
            <a href="data_pt.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data Pendidikan Tinggi</a
            >
            <a href="bpt.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">Data BPT Sekretariat</a>
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#komunitas"
          >
            <i class="bi bi-house-fill me-2"></i> Komunitas/Sekolah <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="komunitas">
            <a href="sekolah.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data Komunitas/Sekolah</a
            >
            <a href="penanggungjawab.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data PJ Sekolah</a
            >
            <a href="konfirmasi_penanggungjawab.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Konfirmasi PJ Sekolah Baru</a
            >
            <a href="sk.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">SK Beasiswa</a>
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#anakasuh"
          >
            <i class="bi bi-person-lines-fill me-2"></i> Anak Asuh <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="anakasuh">
            <a href="anak_asuh.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">List Anak Asuh</a>
            <a href="pengajuan_anakasuh_baru.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Konfirmasi Anak Asuh Baru</a
            >
            <a href="konfirmasi_naik_jenjang.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Konfirmasi Kenaikan Jenjang</a
            >
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#transferbeasiswa"
          >
            <i class="bi bi-receipt me-2"></i> Transfer Beasiswa <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="transferbeasiswa">
            <a href="transfer_beasiswa.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Data Transfer Beasiswa</a
            >
            <a href="status_transfer.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Status Transfer Beasiswa</a
            >
            <a href="ganti_rekening.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Penggantian No Rekening</a
            >
            <a href="pengembalian_dana.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Pengembalian Dana Berlebih</a
            >
            <a
              href="#"
              class="list-group-item list-group-item-action bg-aat-grey ps-5"
              data-bs-toggle="modal"
              data-bs-target="#rekeningYayasanModal"
              >Rekening Yayasan</a
            >
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#laporan"
          >
            <i class="bi bi-journal-text me-2"></i> Laporan <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="laporan">
            <a href="laporan_donatur.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Donatur</a
            >
            <a href="laporan_sekretariat.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Sekretariat</a
            >
            <a href="laporan_komunitas.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Komunitas/Sekolah</a
            >
            <a href="laporan_anakasuh.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Anak Asuh</a
            >
            <a href="laporan_raport_skl_ijasah.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Laporan Raport, SKL, & Ijasah</a
            >
            <a href="rekup_transfer_beasiswa.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Rekup Transfer Beasiswa</a
            >
            <a href="rekup_kode_unik.html" class="list-group-item list-group-item-action bg-aat-grey ps-5"
              >Rekup Kode Unik</a
            >
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="collapse"
            data-bs-target="#pengaturan"
          >
            <i class="bi bi-gear me-2"></i> Pengaturan <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse" id="pengaturan">
            <a href="admin.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">Manajemen Admin</a>
            <a href="tahun_ajaran.html" class="list-group-item list-group-item-action bg-aat-grey ps-5">Tahun Ajaran</a>
          </div>
          <a
            href="#"
            class="list-group-item list-group-item-action bg-aat text-white"
            data-bs-toggle="modal"
            data-bs-target="#kontakYayasanModal"
          >
            <i class="bi bi-telephone me-2"></i> Hubungi Kami
          </a>
        </div>

        <!-- Footer Mobile -->
        <div class="p-3 border-top small text-center text-white d-lg-none">
          Â© Yayasan AAT Indonesia <br />
          Developed by <span class="fw-bold">Omah IT</span> <br />
          Maintained by <span class="fw-bold">Mandhira IT</span>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation (Mobile) -->
    <div class="mobile-bottom-nav">
      <a href="index.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-house-fill fs-4"></i><br />
        <small>Beranda</small>
      </a>

      <a href="transfer_beasiswa.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-receipt fs-4"></i><br />
        <small>Transfer Beasiswa</small>
      </a>

      <a href="status_transfer.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-card-checklist fs-4"></i><br />
        <small>Status Transfer</small>
      </a>

      <a href="raport_skl_ijasah.html" class="text-dark text-center text-decoration-none">
        <i class="bi bi-journal-text fs-4"></i><br />
        <small>Raport</small>
      </a>
    </div>

    <main class="container-fluid pt-3 pt-lg-5 pb-5 mt-5">
      <div class="d-none d-lg-block mb-5"></div>

      <h3 class="text-center page-title d-none d-lg-block">Penggantian Nomor Rekening</h3>

      <div class="container-fluid mb-5 container-wrapper">
        <div class="row">
          <!-- ================= TAB ================= -->
          <ul class="nav nav-tabs mb-3 d-flex flex-nowrap" role="tablist" style="font-size: 12px">
            <li class="nav-item">
              <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#permohonanGanti">
                Permohonan Penggantian Rekening
              </button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#riwayatGanti">
                Riwayat Penggantian Rekening
              </button>
            </li>
          </ul>

          <div class="tab-content">
            <div class="tab-pane fade show active" id="permohonanGanti">
              <!-- ðŸ”¹ TOMBOL FILTER (MOBILE ONLY) -->
              <div class="d-md-none mb-2">
                <button
                  class="btn btn-outline-primary w-100"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#filterCollapse"
                  aria-expanded="false"
                  aria-controls="filterCollapse"
                >
                  <i class="bi bi-funnel"></i> Tampilkan Filter
                </button>
              </div>

              <!-- ðŸ”¹ FILTER -->
              <div id="filterCollapse" class="collapse d-md-block">
                <div class="filter-section ft-12 mb-3">
                  <div class="row g-3 align-items-end">
                    <!-- Sekretariat -->
                    <div class="col-12 col-md-2">
                      <label class="form-label fw-semibold">Sekretariat</label>
                      <select id="sekretariatFilter" class="form-select form-select-sm">
                        <!-- options -->
                      </select>
                    </div>

                    <!-- Tanggal -->
                    <div class="col-12 col-md-2">
                      <label class="form-label fw-semibold">Tanggal</label>
                      <input
                        type="text"
                        id="datepicker"
                        class="form-control form-control-sm"
                        placeholder="dd/mm/yyyy - dd/mm/yyyy"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <!-- ================= TABLE DESKTOP ================= -->
              <div class="table-responsive d-none d-lg-block">
                <table
                  id="datatable"
                  class="table table-striped table-bordered align-middle text-center bg-white shadow-sm no-contextmenu"
                >
                  <thead class="table-light">
                    <tr>
                      <th>ID</th>
                      <th>Tanggal</th>
                      <th>Komunitas/Sekolah</th>
                      <th>Rekening Lama</th>
                      <th>Rekening Baru</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>

              <!-- ================= MOBILE CARD ================= -->
              <div class="card-mobile d-lg-none mt-3">
                <div class="input-group mb-3 shadow-sm">
                  <span class="input-group-text bg-white border-end-0">
                    <i class="bi bi-search"></i>
                  </span>
                  <input
                    type="text"
                    class="form-control border-start-0"
                    placeholder="Cari permohonan penggantian no rekening..."
                    id="searchCardApproval"
                  />
                </div>

                <div id="cardListPermohonan" class="row g-2"></div>

                <div class="d-flex justify-content-center mt-3">
                  <nav>
                    <ul class="pagination justify-content-center" id="paginationMobileApproval"></ul>
                  </nav>
                </div>
              </div>
            </div>

            <!-- ================= STATUS TRANSFER ================= -->
            <div class="tab-pane fade" id="riwayatGanti">
              <!-- ðŸ”¹ TOMBOL FILTER (MOBILE ONLY) -->
              <div class="d-md-none mb-2">
                <button
                  class="btn btn-outline-primary w-100"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#filterCollapseStatus"
                  aria-expanded="false"
                  aria-controls="filterCollapseStatus"
                >
                  <i class="bi bi-funnel"></i> Tampilkan Filter
                </button>
              </div>

              <!-- ðŸ”¹ FILTER -->
              <div id="filterCollapseStatus" class="collapse show d-md-block">
                <div class="filter-section ft-12 mb-3">
                  <div class="row g-3 align-items-end">
                    <!-- Sekretariat -->
                    <div class="col-12 col-md-2">
                      <label class="form-label fw-semibold">Sekretariat</label>
                      <select id="sekretariatFilterStatus" class="form-select form-select-sm">
                        <!-- options -->
                      </select>
                    </div>

                    <!-- Tanggal -->
                    <div class="col-12 col-md-2">
                      <label class="form-label fw-semibold">Tanggal</label>
                      <input
                        type="text"
                        id="datepicker2"
                        class="form-control form-control-sm"
                        placeholder="dd/mm/yyyy - dd/mm/yyyy"
                      />
                    </div>

                    <!-- Status -->
                    <div class="col-12 col-md-2">
                      <label class="form-label fw-semibold">Status</label>
                      <select id="statusFilterStatus" class="form-select form-select-sm">
                        <option value="">Semua</option>
                        <option>Selesai</option>
                        <option>Diverifikasi</option>
                        <option>Menunggu</option>
                        <option>Ditolak</option>
                      </select>
                    </div>
                    <div class="col-12 col-md-2">
                      <button class="btn btn-outline-primary btn-sm w-100">
                        <i class="bi bi-download"></i> Export
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- ================= TABLE DESKTOP ================= -->
              <div class="table-responsive d-none d-lg-block">
                <table
                  id="datatable2"
                  class="table table-striped table-bordered align-middle text-center bg-white shadow-sm"
                >
                  <thead class="table-light">
                    <tr>
                      <th>ID</th>
                      <th>Tanggal</th>
                      <th>Komunitas/Sekolah</th>
                      <th>Rekening Lama</th>
                      <th>Rekening Baru</th>
                      <th>Status</th>
                      <th>Last Update</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>

              <span class="text-danger fst-italic d-none d-lg-block">
                Klik kanan mouse untuk memunculkan menu aksi
              </span>

              <!-- ================= MOBILE CARD ================= -->
              <div class="card-mobile d-lg-none mt-3">
                <div class="input-group mb-3 shadow-sm">
                  <span class="input-group-text bg-white border-end-0">
                    <i class="bi bi-search"></i>
                  </span>
                  <input
                    type="text"
                    class="form-control border-start-0"
                    placeholder="Cari riwayat penggantian no rekening..."
                    id="searchCard"
                  />
                </div>

                <div id="cardList" class="row g-2"></div>

                <div class="d-flex justify-content-center mt-3">
                  <nav>
                    <ul class="pagination justify-content-center" id="paginationMobile"></ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer Desktop (sticky di bawah halaman) -->
    <footer class="fixed-bottom text-white text-center py-2 mt-auto d-none d-lg-block bg-aat">
      <small>
        Copyright Â© Yayasan AAT Indonesia | Developed by
        <span class="fw-bold">Omah IT - Gateway to Your IT Solutions</span> | Maintained by
        <span class="fw-bold">Mandhira IT</span>
        <br />
        Gunakan Browser <span class="fw-bold">Google Chrome</span> atau
        <span class="fw-bold">Mozilla Firefox</span> untuk tampilan terbaik.
        <div class="d-none d-lg-block mb-5"></div>
      </small>
    </footer>

    <!-- Context Menu for Right-Click Actions -->
    <ul id="contextMenu" class="dropdown-menu" style="display: none; position: absolute; z-index: 1050">
      <li>
        <button class="dropdown-item" id="detailAction" data-bs-toggle="modal" data-bs-target="#detailPenggantianModal">
          <i class="bi bi-info"></i> Detail
        </button>
      </li>
      <li>
        <a class="dropdown-item" id="editAction" onclick="formEdit()"> <i class="bi bi-pencil"></i> Edit </a>
      </li>
      <li>
        <button class="dropdown-item text-danger" id="deleteAction" onclick="deleteData()">
          <i class="bi bi-trash"></i> Hapus
        </button>
      </li>
    </ul>

    <!-- Modal Konfirmasi Permohonan -->
    <div
      class="modal fade"
      id="konfirmasiPermohonanModal"
      tabindex="-1"
      aria-labelledby="konfirmasiLabel"
      aria-hidden="true"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-aat text-white">
            <h5 class="modal-title">Konfirmasi Pergantian No Rekening</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <div class="modal-body">
            <div class="info-section ft-14">
              <div class="row g-3">
                <!-- Kolom kiri -->
                <div class="col-12 col-md-12 info-column">
                  <div class="info-item">
                    <span class="info-label">Tgl Permohonan</span>
                    <span class="info-value">27 Desember 2025</span>
                  </div>
                  <div class="info-item mb-3">
                    <span class="info-label">Komunitas/Sekolah</span>
                    <span class="info-value">SMK Kristen 2 Magelang</span>
                  </div>
                  <div class="info-item mb-3">
                    <span class="info-label">Rekening Lama</span>
                    <span class="info-value">
                      BRI 0256565XXXXXXX
                      <br />
                      a/n SMK KRISTEN 2 MAGELANG
                    </span>
                  </div>
                  <div class="info-item mb-3">
                    <span class="info-label">Rekening Baru</span>
                    <span class="info-value"
                      >BCA 5698979
                      <br />
                      a/n SMK KRISTEN 2 MAGELANG
                    </span>
                  </div>

                  <div class="info-item">
                    <span class="info-label">Surat Keterangan</span>
                    <a href="#" class="info-value text-primary text-decoration-none">
                      <i class="bi bi-file-earmark-text"></i> Lihat</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer justify-content-center d-flex flex-nowrap">
            <button type="button" class="btn btn-success px-2 px-lg-4" onclick="konfirmasiPengajuan()">
              <i class="bi bi-check-lg me-1"></i> Konfirmasi
            </button>
            <button type="button" class="btn btn-outline-secondary px-2 px-lg-4" data-bs-dismiss="modal">
              <i class="bi bi-x me-1"></i> Tutup
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal Konfirmasi Permohonan -->

    <!-- Modal Detail Penggantian No Rekening -->
    <div
      class="modal fade"
      id="detailPenggantianModal"
      tabindex="-1"
      aria-labelledby="detailLabel"
      aria-hidden="true"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-aat text-white">
            <h5 class="modal-title">Detail Pergantian No Rekening</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <div class="modal-body">
            <div class="info-section ft-14">
              <div class="row g-3">
                <!-- Kolom kiri -->
                <div class="col-12 col-md-12 info-column">
                  <div class="info-item">
                    <span class="info-label">Tgl Permohonan</span>
                    <span class="info-value">27 Desember 2025</span>
                  </div>
                  <div class="info-item mb-3">
                    <span class="info-label">Komunitas/Sekolah</span>
                    <span class="info-value">SMK Kristen 2 Magelang</span>
                  </div>
                  <div class="info-item mb-3">
                    <span class="info-label">Rekening Lama</span>
                    <span class="info-value">
                      BRI 0256565XXXXXXX
                      <br />
                      a/n SMK KRISTEN 2 MAGELANG
                    </span>
                  </div>
                  <div class="info-item mb-3">
                    <span class="info-label">Rekening Baru</span>
                    <span class="info-value"
                      >BCA 5698979
                      <br />
                      a/n SMK KRISTEN 2 MAGELANG
                    </span>
                  </div>

                  <div class="info-item mb-3">
                    <span class="info-label">Surat Keterangan</span>
                    <a href="#" class="info-value text-primary text-decoration-none">
                      <i class="bi bi-file-earmark-text"></i> Lihat</a
                    >
                  </div>
                  <div class="info-item">
                    <span class="info-label">Status</span>
                    <span class="info-value">
                      <span class="badge bg-success">Selesai</span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer justify-content-center d-flex flex-nowrap">
            <button type="button" class="btn btn-warning text-white px-2 px-lg-4" onclick="formEdit()">
              <i class="bi bi-check-lg me-1"></i> Edit
            </button>
            <button type="button" class="btn btn-outline-secondary px-2 px-lg-4" data-bs-dismiss="modal">
              <i class="bi bi-x me-1"></i> Tutup
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal Detail Penggantian No Rekening -->

    <!-- Modal Form Ganti Rekening -->
    <div
      class="modal fade"
      id="formGantiRekeningModal"
      tabindex="-1"
      aria-labelledby="formLabel"
      aria-hidden="true"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
    >
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-aat text-white">
            <h5 class="modal-title">Form Pergantian No Rekening</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <div class="modal-body">
            <small class="text-important">*) Wajib diisi</small>
            <div class="row">
              <div class="mb-2 row align-items-center">
                <label class="col-sm-4 col-form-label form-label"
                  >Komunitas/Sekolah <sup class="text-danger">*)</sup></label
                >
                <div class="col-sm-8">
                  <select class="form-select form-select-sm select2">
                    <option>== Pilih Komunitas/Sekolah ==</option>
                    <option>SMA Pius 1 Kutoarjo</option>
                    <option>SMK Kristen 2 Magelang</option>
                    <option>SMA Bopkri 2 Magelang</option>
                    <option>SMK Yos 2 Magelang</option>
                    <!-- Add more options here as needed -->
                  </select>
                </div>
              </div>
              <div class="divider-1"></div>
              <!-- Kiri -->
              <div class="col-md-6">
                <div class="text-primary mb-2">Rekening Lama</div>

                <div class="mb-2 row align-items-center">
                  <label class="col-sm-4 col-form-label form-label">Bank</label>
                  <div class="col-sm-8">
                    <input type="text" class="form-control form-control-sm" value="BRI" disabled />
                  </div>
                </div>

                <div class="mb-2 row align-items-center">
                  <label class="col-sm-4 col-form-label form-label">No. Rekening</label>
                  <div class="col-sm-8">
                    <input type="text" class="form-control form-control-sm" value="0048-01-027309-50-8" disabled />
                  </div>
                </div>

                <div class="mb-2 row align-items-center">
                  <label class="col-sm-4 col-form-label form-label">Atas Nama</label>
                  <div class="col-sm-8">
                    <textarea class="form-control form-control-sm" disabled>SMK KRISTEN 2 MAGELANG</textarea>
                  </div>
                </div>
              </div>

              <!-- Kanan -->
              <div class="col-md-6">
                <div class="text-primary mb-2">Rekening Baru</div>

                <div class="mb-2 row align-items-center">
                  <label class="col-sm-5 col-form-label form-label">Bank <sup class="text-important">*)</sup></label>
                  <div class="col-sm-7">
                    <select class="form-select form-select-sm">
                      <option>== Pilih Bank ==</option>
                      <option>BRI</option>
                      <option>BNI</option>
                      <option>Mandiri</option>
                      <option>BCA</option>
                      <option>Lainnya</option>
                      <!-- Add more options here as needed -->
                    </select>
                  </div>
                  <span class="text-muted fst-italic ft-10 text-important">
                    Pergantian Selain BRI, wajib konfirmasi ke Ketua Yayasan
                  </span>
                </div>

                <div class="mb-2 row align-items-center">
                  <label class="col-sm-5 col-form-label form-label"
                    >No. Rekening <sup class="text-important">*)</sup></label
                  >
                  <div class="col-sm-7">
                    <input type="text" class="form-control form-control-sm" />
                  </div>
                </div>

                <div class="mb-2 row align-items-center">
                  <label class="col-sm-5 col-form-label form-label"
                    >Atas Nama <sup class="text-important">*)</sup></label
                  >
                  <div class="col-sm-7">
                    <input type="text" class="form-control form-control-sm" />
                  </div>
                  <span class="text-muted fst-italic ft-10 text-important">
                    Wajib menggunakan Atas Nama Instansi tanpa terkecuali
                  </span>
                </div>

                <div class="mb-2 row align-items-center">
                  <label class="col-sm-5 col-form-label form-label"
                    >Surat Keterangan <sup class="text-important">*)</sup></label
                  >
                  <div class="col-sm-7">
                    <input type="file" class="form-control form-control-sm" />
                  </div>
                  <small class="text-muted fst-italic ft-10 text-important">
                    *Format file <em>hanya PDF, JPEG, JPG, dan PNG</em> dengan ukuran maksimal <strong>500 kb</strong>
                  </small>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer justify-content-center d-flex flex-nowrap">
            <button type="button" class="btn btn-success px-2 px-lg-4">
              <i class="bi bi-check-lg me-1"></i> Simpan
            </button>
            <button type="button" class="btn btn-outline-secondary px-2 px-lg-4" data-bs-dismiss="modal">
              <i class="bi bi-x me-1"></i> Tutup
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal Form Ganti Rekening -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/badges.js"></script>
    <script src="../assets/js/style.js"></script>
    <!-- Select2 -->
    <script src="../assets/js/select2.js"></script>
    <!-- jQuery (dibutuhkan oleh DataTables) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>

    <script src="../assets/js/datatable.init.js"></script>
    <!-- Sweet Alerts Js-->
    <script src="../assets/plugins/sweetalert2/sweetalert2.min.js"></script>
    <script src="../assets/plugins/sweetalert2/sweetshow.js"></script>

    <!-- Date Range Picker -->
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script src="../assets/plugins/datepicker/datepicker.init.js"></script>

    <!-- JavaScript for Approval Transfer Tab -->
    <script>
      /* ======================================================
       * CONFIG PERMOHONAN
       * ====================================================== */
      const CONFIGpermohonan = {
        sekretariat: ['Yogyakarta', 'Semarang', 'Madiun', 'Purwokerto', 'Bandung'],
        itemsPerPageMobile: 10,
      };

      /* ======================================================
       * HELPERS APPROVAL
       * ====================================================== */
      const qsApproval = s => document.querySelector(s);
      const qsaApproval = s => [...document.querySelectorAll(s)];

      const getCheckedValuesApproval = selector =>
        qsaApproval(selector)
          .filter(el => el.checked)
          .map(el => el.value);

      /* ======================================================
       * DATA SOURCE APPROVAL (SINGLE SOURCE OF TRUTH)
       * ====================================================== */
      const dataPermohonan = Array.from({ length: 30 }, (_, i) => {
        // Komunitas / Sekolah
        const komunitasSekolah =
          `Sekolah ${i + 1} ` +
          CONFIGpermohonan.sekretariat[Math.floor(Math.random() * CONFIGpermohonan.sekretariat.length)];

        // Bank
        const bankList = ['BCA', 'BRI', 'BNI', 'Mandiri'];
        const bankRekeningLama = bankList[Math.floor(Math.random() * bankList.length)];
        const bankRekeningBaru = bankList[Math.floor(Math.random() * bankList.length)];

        // Generate tanggal acak dalam 2 tahun terakhir
        const now = new Date();
        const twoYearsAgo = new Date(now.getFullYear() - 2, now.getMonth(), now.getDate());
        const randDate = new Date(twoYearsAgo.getTime() + Math.random() * (now.getTime() - twoYearsAgo.getTime()));

        return {
          id: i + 1,
          tanggal: moment(randDate).format('DD/MM/YYYY'),
          komunitasSekolah,
          bankRekeningLama,
          noRekeningLama: `10${Math.floor(100000000 + Math.random() * 900000000)}`,
          atasNamaRekeningLama: `Yayasan ${komunitasSekolah}`,
          bankRekeningBaru,
          noRekeningBaru: `20${Math.floor(100000000 + Math.random() * 900000000)}`,
          atasNamaRekeningBaru: `Yayasan ${komunitasSekolah}`,
          status: 'Menunggu',
        };
      });

      /* ======================================================
       * FILTER STATE APPROVAL
       * ====================================================== */
      function getFilterValuesApproval() {
        const datepickerVal = qsApproval('#datepicker').value;
        let startDate = null,
          endDate = null;
        if (datepickerVal) {
          const dates = datepickerVal.split(' - ');
          if (dates.length === 2) {
            startDate = moment(dates[0], 'DD/MM/YYYY').startOf('day');
            endDate = moment(dates[1], 'DD/MM/YYYY').endOf('day');
          }
        }
        return {
          sekretariat: qsApproval('#sekretariatFilter').value,
          search: qsApproval('#searchCardApproval')?.value.toLowerCase() || '',
          startDate,
          endDate,
        };
      }

      /* ======================================================
       * GENERATE SEKRETARIAT SELECT OPTIONS APPROVAL
       * ====================================================== */
      function generateSekretariatFilterApproval() {
        const select = qsApproval('#sekretariatFilter');
        if (!select) return;

        select.innerHTML = '<option value="">Semua</option>';

        CONFIGpermohonan.sekretariat.forEach(val => {
          select.insertAdjacentHTML('beforeend', `<option value="${val}">${val}</option>`);
        });
      }

      /* ======================================================
       * CORE FILTER ENGINE APPROVAL (DIPAKAI SEMUA)
       * ====================================================== */
      function filterDataApproval(data, f) {
        return data.filter(item => {
          if (f.sekretariat && !item.komunitasSekolah.includes(f.sekretariat)) return false;

          if (f.search) {
            if (!item.komunitasSekolah.toLowerCase().includes(f.search) && !item.id.toString().includes(f.search))
              return false;
          }

          if (f.startDate && f.endDate) {
            const itemDate = moment(item.tanggal, 'DD/MM/YYYY');
            if (!itemDate.isBetween(f.startDate, f.endDate, null, '[]')) return false;
          }

          return true;
        });
      }

      /* ======================================================
       * DATATABLE APPROVAL (DESKTOP)
       * ====================================================== */
      let dataTableApproval;

      function renderTableApproval() {
        const tbody = qsApproval('#datatable tbody');
        if (!tbody) return;

        const filtered = filterDataApproval(dataPermohonan, getFilterValuesApproval());

        if (!dataTableApproval) {
          // Initialize DataTable with empty data and enable built-in search
          tbody.innerHTML = '';
          dataTableApproval = $('#datatable').DataTable();
        }

        // Clear existing rows
        dataTableApproval.clear();

        // Add filtered rows using DataTable API
        dataTableApproval.rows.add(
          filtered.map(d => [
            d.id,
            d.tanggal,
            `<span class="text-start d-block">${d.komunitasSekolah}</span>`,
            `${d.bankRekeningLama} ${d.noRekeningLama}<br>${d.atasNamaRekeningLama}`,
            `${d.bankRekeningBaru} ${d.noRekeningBaru}<br>${d.atasNamaRekeningBaru}`,
            `<span class="badge bg-${getStatusBadgeClass(
              d.status
            )}" data-bs-toggle="modal" data-bs-target="#konfirmasiPermohonanModal">${d.status}</span>`,
          ])
        );

        // Draw the table
        dataTableApproval.draw();
      }

      /* ======================================================
       * MOBILE CARD APPROVAL
       * ====================================================== */
      let currentPageMobileApproval = 1;

      function renderCardsApproval() {
        const list = qsApproval('#cardListPermohonan');
        const pag = qsApproval('#paginationMobileApproval');
        if (!list || !pag) return;

        const filtered = filterDataApproval(dataPermohonan, getFilterValuesApproval());
        const total = Math.ceil(filtered.length / CONFIGpermohonan.itemsPerPageMobile);
        const start = (currentPageMobileApproval - 1) * CONFIGpermohonan.itemsPerPageMobile;

        list.innerHTML = filtered
          .slice(start, start + CONFIGpermohonan.itemsPerPageMobile)
          .map(
            item => `
            <div class="col-12">
                <div class="card shadow-sm p-3 mb-2" data-id="${item.id}" data-nama="${item.komunitasSekolah}">
                  <h5 class="card-title fw-bold d-flex justify-content-between align-items-center">
                    ${item.komunitasSekolah}
                    <i class="bi bi-check-circle text-success me-1" style="cursor: pointer;" data-bs-toggle="modal" data-bs-target="#konfirmasiPermohonanModal"></i>
                  </h5>
                  <div class="divider-1"></div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Tanggal</div>
                    <div class="col-7">${item.tanggal}</div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Rekening Lama</div>
                    <div class="col-7">
                      ${item.bankRekeningLama} ${item.noRekeningLama} <br>
                      ${item.atasNamaRekeningLama}
                    </div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Rekening Baru</div>
                    <div class="col-7">
                      ${item.bankRekeningBaru} ${item.noRekeningBaru} <br>
                      ${item.atasNamaRekeningBaru}
                    </div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Status</div>
                    <div class="col-7"><span class="badge bg-${getStatusBadgeClass(item.status)}">${
              item.status
            }</span></div>
                  </div>
                </div>
              </div>`
          )
          .join('');

        pag.innerHTML = total > 1 ? generatePagination2(total, currentPageMobileApproval) : '';

        qsaApproval('#paginationMobileApproval .page-link').forEach(a => {
          a.onclick = e => {
            e.preventDefault();
            currentPageMobileApproval = +a.dataset.page;
            renderCardsApproval();
          };
        });
      }

      /* ======================================================
       * EVENT FLOW APPROVAL (PENTING)
       * ====================================================== */
      function onMasterFilterChangeApproval() {
        renderTableApproval();
        renderCardsApproval();
      }

      /* ======================================================
       * INIT APPROVAL
       * ====================================================== */
      generateSekretariatFilterApproval();
      renderTableApproval();
      renderCardsApproval();

      // Attach event listeners for Approval
      ['sekretariatFilter'].forEach(id => {
        qsApproval(`#${id}`)?.addEventListener('change', onMasterFilterChangeApproval);
      });

      qsApproval('#searchCardApproval')?.addEventListener('input', () => {
        currentPageMobileApproval = 1;
        renderCardsApproval();
      });

      // Konfirmasi Permohonan Penggantian Rekening
      function konfirmasiPengajuan(id) {
        $('#konfirmasiPermohonanModal').modal('hide');
        Swal.fire({
          title: 'Konfirmasi Approval',
          text: `Proses pengajuan ID ${id}?`,
          icon: 'question',
          showDenyButton: true,
          showCancelButton: false,
          confirmButtonText: 'Setuju',
          denyButtonText: 'Tolak',
          confirmButtonColor: '#198754',
          denyButtonColor: '#dc3545',
          allowOutsideClick: false,
          allowEscapeKey: false,
        }).then(async result => {
          /* ================= APPROVE ================= */
          if (result.isConfirmed) {
            console.log('APPROVE:', id);
            // ðŸ‘‰ TODO: AJAX / fetch approve di sini
            swal_alert('Berhasil', 'Pengajuan berhasil Selesai', 'success');
          }

          /* ================= REJECT ================= */
          if (result.isDenied) {
            const alasan = await Swal.fire({
              title: 'Alasan Penolakan',
              input: 'textarea',
              inputPlaceholder: 'Masukkan alasan penolakan...',
              inputValidator: v => {
                if (!v) return 'Alasan wajib diisi';
              },
              showCancelButton: true,
              confirmButtonText: 'Kirim',
              cancelButtonText: 'Batal',
              allowOutsideClick: false,
              allowEscapeKey: false,
            });

            // âŒ Batal â†’ stop
            if (!alasan.isConfirmed) return;

            // ðŸ‘‰ TODO: AJAX / fetch reject di sini
            swal_alert('Ditolak', `Pengajuan ditolak<br><small><em>${alasan.value}</em></small>`, 'success');
          }

          // ðŸ”‘ FIX FOCUS (hindari aria-hidden warning)
          setTimeout(() => document.body.focus(), 0);
        });
      }
    </script>

    <!-- Initialize Datepicker -->
    <script>
      $(document).ready(function () {
        initDateRangePicker('#datepicker', onMasterFilterChangeApproval);
        initDateRangePicker('#datepicker2', onMasterFilterChange);

        // Ensure datepicker2 triggers filter on change
        $('#datepicker2').on('apply.daterangepicker', function (ev, picker) {
          onMasterFilterChange();
        });
      });
    </script>

    <script>
      /* ======================================================
       * CONFIG
       * ====================================================== */
      const CONFIG = {
        status: ['Menunggu', 'Diverifikasi', 'Selesai', 'Ditolak'],
        sekretariat: ['Yogyakarta', 'Semarang', 'Madiun', 'Purwokerto', 'Bandung'],
        itemsPerPageMobile: 10,
      };

      /* ======================================================
       * HELPERS
       * ====================================================== */
      const qs = s => document.querySelector(s);
      const qsa = s => [...document.querySelectorAll(s)];

      const getCheckedValues = selector =>
        qsa(selector)
          .filter(el => el.checked)
          .map(el => el.value);

      /* ======================================================
       * GENERATE SEKRETARIAT SELECT OPTIONS
       * ====================================================== */
      function generateSekretariatFilter() {
        const select = qs('#sekretariatFilterStatus');
        select.innerHTML = '<option value="">Semua</option>';

        CONFIG.sekretariat.forEach(val => {
          select.insertAdjacentHTML('beforeend', `<option value="${val}">${val}</option>`);
        });
      }

      /* ======================================================
       * DATA SOURCE (SINGLE SOURCE OF TRUTH)
       * ====================================================== */
      const riwayatData = Array.from({ length: 30 }, (_, i) => {
        // Komunitas / Sekolah
        const komunitasSekolah =
          `Sekolah ${i + 1} ` + CONFIG.sekretariat[Math.floor(Math.random() * CONFIG.sekretariat.length)];

        const status = CONFIG.status[Math.floor(Math.random() * CONFIG.status.length)];

        // Bank
        const bankList = ['BCA', 'BRI', 'BNI', 'Mandiri'];
        const bankRekeningLama = bankList[Math.floor(Math.random() * bankList.length)];
        const bankRekeningBaru = bankList[Math.floor(Math.random() * bankList.length)];

        // Generate tanggal acak dalam 2 tahun terakhir
        const now = new Date();
        const twoYearsAgo = new Date(now.getFullYear() - 2, now.getMonth(), now.getDate());
        const randDate = new Date(twoYearsAgo.getTime() + Math.random() * (now.getTime() - twoYearsAgo.getTime()));

        return {
          id: i + 1,
          tanggal: moment(randDate).format('DD/MM/YYYY'),
          komunitasSekolah,
          bankRekeningLama,
          noRekeningLama: `10${Math.floor(100000000 + Math.random() * 900000000)}`,
          atasNamaRekeningLama: `Yayasan ${komunitasSekolah}`,
          bankRekeningBaru,
          noRekeningBaru: `20${Math.floor(100000000 + Math.random() * 900000000)}`,
          atasNamaRekeningBaru: `Yayasan ${komunitasSekolah}`,
          status: status,
          lastUpdate: moment(randDate).format('DD/MM/YYYY'),
        };
      });

      /* ======================================================
       * FILTER STATE
       * ====================================================== */
      function getFilterValues() {
        const datepickerVal = qs('#datepicker2').value;
        let startDate = null,
          endDate = null;
        if (datepickerVal) {
          const dates = datepickerVal.split(' - ');
          if (dates.length === 2) {
            startDate = moment(dates[0], 'DD/MM/YYYY').startOf('day');
            endDate = moment(dates[1], 'DD/MM/YYYY').endOf('day');
          }
        }
        return {
          status: qs('#statusFilterStatus').value,
          sekretariat: qs('#sekretariatFilterStatus').value,
          search: qs('#searchCard')?.value.toLowerCase() || '',
          startDate,
          endDate,
        };
      }

      /* ======================================================
       * CORE FILTER ENGINE (DIPAKAI SEMUA)
       * ====================================================== */
      function filterData(data, f) {
        return data.filter(item => {
          if (f.status && item.status !== f.status) return false;
          if (f.sekretariat && !item.komunitasSekolah.includes(f.sekretariat)) return false;

          if (f.search) {
            if (!item.komunitasSekolah.toLowerCase().includes(f.search) && !item.id.toString().includes(f.search))
              return false;
          }

          if (f.startDate && f.endDate) {
            const itemDate = moment(item.tanggal, 'DD/MM/YYYY');
            if (!itemDate.isBetween(f.startDate, f.endDate, null, '[]')) return false;
          }

          return true;
        });
      }

      /* ======================================================
       * DATATABLE (DESKTOP)
       * ====================================================== */
      let dataTable;

      function renderTable() {
        const filtered = filterData(riwayatData, getFilterValues());

        if (!dataTable) {
          // Initialize DataTable with empty data and disable built-in search
          qs('#datatable2 tbody').innerHTML = '';
          dataTable = $('#datatable2').DataTable({ searching: false });
        }

        // Clear existing rows
        dataTable.clear();

        // Add filtered rows using DataTable API
        dataTable.rows.add(
          filtered.map(d => [
            d.id,
            d.tanggal,
            `<span class="text-start d-block">${d.komunitasSekolah}</span>`,
            `${d.bankRekeningLama} ${d.noRekeningLama}<br>${d.atasNamaRekeningLama}`,
            `${d.bankRekeningBaru} ${d.noRekeningBaru}<br>${d.atasNamaRekeningBaru}`,
            `<span class="badge bg-${getStatusBadgeClass(d.status)}">${d.status}</span>`,
            d.lastUpdate,
          ])
        );

        // Draw the table
        dataTable.draw();
      }

      /* ======================================================
       * MOBILE CARD
       * ====================================================== */
      let currentPageMobile = 1;

      function renderCards() {
        const list = qs('#cardList');
        const pag = qs('#paginationMobile');
        if (!list || !pag) return;

        const filtered = filterData(riwayatData, getFilterValues());
        const total = Math.ceil(filtered.length / CONFIG.itemsPerPageMobile);
        const start = (currentPageMobile - 1) * CONFIG.itemsPerPageMobile;

        list.innerHTML = filtered
          .slice(start, start + CONFIG.itemsPerPageMobile)
          .map(
            item => `
      <div class="col-12">
                <div class="card shadow-sm p-3 mb-2" data-id="${item.id}" data-nama="${item.komunitasSekolah}">
                  <h5 class="card-title fw-bold d-flex justify-content-between align-items-center">
                    ${item.komunitasSekolah}
                    <i class="bi bi-three-dots-vertical card-menu" style="cursor: pointer;"></i>
                  </h5>
                  <div class="divider-1"></div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Tanggal</div>
                    <div class="col-7">${item.tanggal}</div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Rekening Lama</div>
                    <div class="col-7">
                      ${item.bankRekeningLama} ${item.noRekeningLama} <br>
                      ${item.atasNamaRekeningLama}
                    </div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Rekening Baru</div>
                    <div class="col-7">
                      ${item.bankRekeningBaru} ${item.noRekeningBaru} <br>
                      ${item.atasNamaRekeningBaru}
                    </div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Status</div>
                    <div class="col-7"><span class="badge bg-${getStatusBadgeClass(item.status)}">${
              item.status
            }</span></div>
                  </div>

                  <div class="row mb-1">
                    <div class="col-5 fw-bold">Last Update</div>
                    <div class="col-7">${item.lastUpdate}</div>
                  </div>
                </div>
              </div>`
          )
          .join('');

        pag.innerHTML = total > 1 ? generatePagination2(total, currentPageMobile) : '';

        qsa('#paginationMobile .page-link').forEach(a => {
          a.onclick = e => {
            e.preventDefault();
            currentPageMobile = +a.dataset.page;
            renderCards();
          };
        });
      }

      /* ======================================================
       * EVENT FLOW (PENTING)
       * ====================================================== */
      function onMasterFilterChange() {
        renderTable();
        renderCards();
        renderTableApproval();
        renderCardsApproval();
      }

      /* ======================================================
       * INIT
       * ====================================================== */
      generateSekretariatFilter();
      renderTable();
      renderCards();

      // Handle tab changes to render tables when tab is shown
      $('a[data-bs-toggle="tab"]').on('shown.bs.tab', function (e) {
        const target = $(e.target).attr('data-bs-target');
        if (target === '#riwayatGanti') {
          renderTable();
          renderCards();
        }
      });

      // Attach event listeners
      ['statusFilterStatus', 'sekretariatFilterStatus'].forEach(id => {
        qs(`#${id}`)?.addEventListener('change', onMasterFilterChange);
      });

      qs('#searchCard')?.addEventListener('input', () => {
        currentPageMobile = 1;
        renderCards();
      });

      // Form Edit
      function formEdit(id) {
        $('#detailPenggantianModal').modal('hide');
        $('#formGantiRekeningModal').modal('show');
      }

      // Delete Data
      function deleteData() {
        swal_confirm('Konfirmasi', 'Yakin ingin menghapus data?', 'warning').then(result => {
          if (result.isConfirmed) {
            swal_alert('Berhasil', 'Data berhasil dihapus!', 'success');
          }
        });
      }
    </script>
  </body>
</html>


